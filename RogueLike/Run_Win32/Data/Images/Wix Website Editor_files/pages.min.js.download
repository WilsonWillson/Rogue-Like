function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();define("pages/utils/pageCategories",["util"],function(e){"use strict";var t=e.translate;return{MAIN_MENU:{id:"CUSTOM_MAIN_MENU",title:t("NewPages_Panel_Left_SiteMenu_Label"),helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",mobileHelpId:"1aeed4d9-19a1-44b7-beec-7bc38a9d4d99",group:"menus",biCategory:"main menu"},MEMBERS_MENU:{id:"MEMBERS_SUB_MENU",title:t("NewPages_Panel_Left_MembersMenu_Label"),helpId:"ab4d4af2-0a5a-4ad9-93fe-dbf42f22d2ca",mobileHelpId:"8fa70d57-3d09-4f0b-a966-7ef2475e3f1b",group:"menus",biCategory:"members menu"},MENUS:{id:"MENUS",group:"menus",helpId:"8278a5f6-119c-412e-8b01-4bd0955cb307",biCategory:"custom menu"},BLOG_PAGES:{id:"BLOG_PAGES",title:"SiteApp_Blog_PagesTab_Header",helpId:"677f1d1e-a8ee-45f7-9ac1-3b5fd3c02e1c",mobileHelpId:"0355a554-781a-4307-9efe-0f40fa877a08",group:"tpa_pages",biCategory:"blog"},TPA_PAGES:{id:"TPA_PAGES",group:"tpa_pages",biCategory:"tpa"},DYNAMIC_PAGES_INTRO:{id:"DYNAMIC_PAGES_INTRO",helpId:"4d88ab53-0157-47aa-9c19-0d5762fcb82b",title:"NewPages_Panel_Left_DynamicPage_Label",group:"dynamic_pages",biCategory:"dynamic_page_intro"},DYNAMIC_PAGES:{id:"DYNAMIC_PAGES",helpId:"1e76f0cc-531a-45b3-bfe0-8907cf391fca",mobileHelpId:"4eda8656-f16f-4ddd-9c80-4b80eef09686",group:"dynamic_pages",biCategory:"router"},ROUTER_PAGES:{id:"ROUTER_PAGES",helpId:"aa6cebfb-a948-4767-bb0e-a60cb8fa9146",mobileHelpId:"4b873e86-b218-4589-b84b-8070c775f3c4",group:"dynamic_pages",biCategory:"router"},POPUPS:{id:"POPUPS",title:"POPUPS_SiteStructure_Panel_Popups",helpId:"24659a21-11c8-41e1-9752-5822677154a0",mobileHelpId:"05438eeb-262a-49e0-a59b-dfda242c5609",group:"popups",biCategory:"lightbox"},TRANSITIONS:{id:"TRANSITIONS",title:"NewPages_Panel_Transitions_Title",group:"transitions",biCategory:"transitions"}}}),define("pages/panel/pagesView/editorAPIConnectors/getActions",["lodash","util","core","tpa","blog","platform"],function(e,t,n,a,i,s){"use strict";var o="Pages_Actions_Page_Rename",r=function(e,t,a,i){e.bi.event(n.bi.events.pages.pagesPanel.quick_actions_menu_select,{page_id:t,source:i,category:a})},p=function(e,t,a){e.bi.event(n.bi.events.pages.pagesPanel.tab_clicked_an_item_at_settings_menu,{source:a,category:t})},l=function(t,n,a,i){return function(s){var o=e.defaults(i,{origin:"pagesPanel",publicUrl:t.documentServices.generalInfo.getPublicUrl(),pageRef:s?t.documentServices.pages.getReference(s):null});t.documentServices.platform.notifyApplication(n,{eventType:a,eventPayload:o}),t.panelManager.closeAllPanels()}},u=function(e,n,a){return{title:t.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(t){e({pageId:t,tabTitle:"page"}),r(n,t,"tabPageInfo",a)},isSettings:!0}};return{dynamicPage:function(t,n,a,i,p,u){if(!u)return null;var c=[];if(t.developerMode.isEnabled()){var d=t.pages.dynamicPages.getDynamicPageActions(n,"pageActions");c=e.map(d,function(e){var n=e.title,s=e.icon,p=e.type,u=e.event,c=l(t,a,u,{routerRef:i});return{title:n,symbolName:p===o?"renameAction":s,onClick:function(e,a){p===o?t.pages.data.update(e,{title:a}):c(e),r(t,e,n,"router")},isRename:p===o}})}var g=t.pages.dynamicPages.getDynamicPageActions(n,"pageSettings",[s.constants.pages.page_settings.pageInfo.type,s.constants.pages.page_settings.seo.type]),m=e.map(g,function(e){return{title:e.title,symbolName:e.icon,onClick:function(a){p({pageId:n,tabTitle:e.tabTitle}),r(t,a,e.title,"router")},isSettings:!0}});return[].concat(_toConsumableArray(m),_toConsumableArray(c))},tpaPage:function(e,n,a){return a?[u(n,e,"tpa_pages"),{title:t.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(t,n){e.pages.data.update(t,{title:n}),e.history.debouncedAdd("Rename Page"),r(e,t,"rename","tpa_pages")},isRename:!0},{title:t.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(t){e.pages.remove(t,function(){return e.history.add("removing a page",{currentPage:t})}),r(e,t,"delete","tpa_pages")}}]:null},tpaSubPage:function(e,t,n){return n?[u(t,e,"tpa_pages")]:null},popup:function(a,i,s,o){return i?[{title:t.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(e){var t=a.pages.popupPages.getPopupContainer();a.selection.selectComponentByCompRef(t),a.openComponentPanel("settingsPanel",{initiatorName:"quickActions"}),r(a,e,"open_popup_settings_panel","lightbox")},isSettings:!0},{title:t.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(e,t){a.pages.data.update(e,{title:t}),a.history.debouncedAdd("Rename Page"),o(),r(a,e,"rename","lightbox")},isRename:!0},{title:t.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",onClick:function(e,t){var i=a.pages.popupPages.duplicate(e),o=n.utils.pageTitleUtils.generateDuplicatedTitle(t),p=a.documentServices.generalInfo.urlFormat.isSlash()?a.pages.data.pageUriSEO.convertPageNameToUrl:n.utils.pageTitleUtils.convertPageNameToUrl;a.pages.data.update(i.id,{title:o,pageUriSEO:p(o)}),a.pages.navigateTo(i.id),a.history.add("popup page was duplicated",{currentPage:e}),s(i.id),r(a,e,"duplicate","lightbox")}},{title:t.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(t,i){a.documentServices.waitForChangesApplied(function(){a.pages.remove(t,e.partial(a.history.add,"removed popup"))}),a.bi.event(n.bi.events.topbar.pages.page_or_pop_up_deleted,{page_or_popup:"pop up",page_popup_string_id:t,page_popup_name:i}),r(a,t,"delete","lightbox")}}]:null},tpaTab:function(e,n,i){if("1380b703-ce81-ff05-f115-39571d94dfcd"!==n||!i)return null;return[{title:t.translate("NewPages_Panel_StorePages_Panel_Manage"),symbolName:"settingsAction",onClick:function(){a.superApps.openDashboardUrl(a.superApps.superAppsConstants.ECOM_APP_DEF_ID,"90%","100%"),p(e,"manage","tpa_pages")}}]},blogTab:function(e,n,a){if(!a)return null;return[{title:t.translate("NewPages_Panel_BlogPages_Panel_Manage"),symbolName:"settingsAction",onClick:function(){i.openBlogManagerFrame(e,"allPosts"),p(e,"manage","blog_pages")}},function(e,n,a){return{title:t.translate(a),symbolName:"deleteAction",onClick:function(){e.pages.remove(n[0].id,function(){return e.history.add("removing a page",{currentPage:n[0].id})}),p(e,"delete","tpa_pages")}}}(e,n,"NewPages_Panel_BlogPages_Panel_Delete")]},menuTab:function(t,n,a){if(!a||!n)return null;var i=t.pages.dynamicPages.getActionByAppDefId(n,"routerActions"),s=e.get(t.documentServices.platform.getAppDataByAppDefId(n),"applicationId");return e.map(i,function(e){return{title:e.title,symbolName:e.icon,onClick:e.callback||l(t,s,e.event)}})},router:function(t,n,a,i){if(!n||!t.developerMode.isEnabled())return null;var s=t.documentServices.routers.getRouterRef.byPrefix(i),o=t.pages.dynamicPages.getRouterActionByPrefix(i);return e.map(o,function(e){var n=e.title,i=e.icon,o=e.event,r=l(t,a,o,{routerRef:s});return{title:n,symbolName:i,onClick:function(e){r(e),p(t,n,"router")}}})},getOnClickApplicationNotification:l}}),define("pages/panel/pagesView/page/page.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,i){"use strict";return function(){function s(){var n=this.getActions(),s=this.getSettingsActions();return e.createElement.apply(this,[a.ContextMenu,{className:"context-menu flat page-actions",key:"page-context-menu",automationId:"page-context-menu",onToggle:this.handleContextMenuToggle},t.map(s,function(t,n,s,o){return e.createElement(a.ContextMenuAction,{onClick:function(e,t,n,a){this.handleClickAction(n)}.bind(this,t,n,s,o),key:"action-"+s.title,automationId:"action-"+s.title,className:"page-settings-action-pp"},e.createElement(i.symbol,{name:s.symbolName}),e.createElement("span",{},s.title))}.bind(this,n,s)),t.isEmpty(n)||t.isEmpty(s)?null:e.createElement(a.Divider,{key:"divider"}),t.map(n,function(t,n,s,o){return e.createElement(a.ContextMenuAction,{onClick:function(e,t,n,a){this.handleClickAction(n)}.bind(this,t,n,s,o),key:"action-"+s.title,automationId:"action-"+s.title},e.createElement(i.symbol,{name:s.symbolName}),e.createElement("span",{},s.title))}.bind(this,n,s))])}return e.createElement("div",{className:"page-pp "+t({selected:this.props.isSelected}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},null===this.state.inputValue?e.createElement("div",{className:"title-container",key:"title-container-page-pp",onClick:function(){this.props.onClick(this.props.id)}.bind(this),onDoubleClick:this.onDoubleClick},e.createElement("div",{className:"left-container"},e.createElement(a.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},this.props.typeSymbol?e.createElement(i.symbol,{name:this.props.typeSymbol,key:"typeSymbol-pp"}):null),e.createElement(a.TooltipOnEllipsis,{marginTop:5,contentClassName:"title"},this.props.title)),e.createElement("div",{className:"right-container"},this.props.permissionSymbol?e.createElement(i.symbol,{name:this.props.permissionSymbol,key:"permissionSymbol-pp"}):null,this.props.actions&&this.props.actions.length>1?s.apply(this,[]):null,this.props.actions&&1===this.props.actions.length?function(){var t=this.props.actions[0];return e.createElement(a.Button,{className:"single-action page-actions",onClick:function(e){this.handleClickAction(e)}.bind(this,t),key:"page-single-action"},e.createElement(i.symbol,{name:t.symbolName}))}.apply(this,[]):null)):null,null!==this.state.inputValue?e.createElement("div",{className:"input-button-container",key:"input-container-page-pp"},e.createElement(a.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!n.validate.pageNameValidator(this.state.inputValue),invalidMessage:n.translate(n.validate.pageNameValidator(this.state.inputValue)),shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleBlurInput,autoSelect:!0}),e.createElement(a.Button,{className:"done-button"},"\n            ",n.translate("Pages_Actions_Rename_Button"),"\n        ")):null)}}),define("pages/panel/pagesView/page/page",["react","lodash","core","util","pages/panel/pagesView/page/page.rt"],function(e,t,n,a,i){"use strict";var s=function(s){function o(e){_classCallCheck(this,o);var i=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return i.state={inputValue:e.mountInRenameMode?e.title:null},i.handleClickAction=function(e){e.isRename?i.openRenameMode():e.onClick(i.props.id,i.props.title)},i.handleContextMenuToggle=function(e){e&&i.props.biEvent(n.bi.events.pages.pagesPanel.page_actions_click,{page_id:i.props.id,source:i.props.biCategory})},i.openRenameMode=function(){return i.setState({inputValue:i.props.title})},i.onDoubleClick=function(){t.filter(i.props.actions,"isRename")[0]&&i.props.renameEnabled&&i.openRenameMode()},i.handleChangeInput=function(e){return i.setState({inputValue:e})},i.handleBlurInput=function(){if(!a.validate.pageNameValidator(i.state.inputValue)&&i.props.title!==i.state.inputValue){t.filter(i.props.actions,"isRename")[0].onClick(i.props.id,i.state.inputValue)}i.setState({inputValue:null})},i.getSettingsActions=function(){return t.filter(i.props.actions,"isSettings")},i.getActions=function(){return t.reject(i.props.actions,"isSettings")},i}return _inherits(o,e.Component),_createClass(o,[{key:"render",value:function(){return i.call(this)}}]),o}();return s.displayName="Page",s.propTypes={id:e.PropTypes.string.isRequired,title:e.PropTypes.string.isRequired,onClick:e.PropTypes.func.isRequired,actions:e.PropTypes.arrayOf(e.PropTypes.shape({title:e.PropTypes.string.isRequired,onClick:e.PropTypes.func.isRequired,symbolName:e.PropTypes.string.isRequired,isRename:e.PropTypes.bool})),isSelected:e.PropTypes.bool,info:e.PropTypes.string,mountInRenameMode:e.PropTypes.bool,renameEnabled:e.PropTypes.bool.isRequired,typeSymbol:e.PropTypes.string,permissionSymbol:e.PropTypes.string,biEvent:e.PropTypes.func.isRequired,biCategory:e.PropTypes.string.isRequired},s}),define("pages/panel/pagesView/pagesView.rt",["react","lodash","util","baseUILib","symbols","pages/panel/pagesView/page/page"],function(e,t,n,a,i,s){"use strict";return function(){return e.createElement("div",{className:"pages-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp,className:"header light"},e.createElement("span",{},this.props.title)),e.createElement("div",{className:"pages-container-outer"},e.createElement(a.CustomScroll,{},e.createElement.apply(this,["ul",{className:"pages-container-inner"},t.map(this.props.pages,function(t,n){return e.createElement("li",{className:"page-container",key:"li-"+t.id},e.createElement(s,{id:t.id,title:t.title,info:t.info,typeSymbol:t.typeSymbol,permissionSymbol:t.permissionSymbol,mountInRenameMode:this.props.renamedItemId===t.id,actions:t.actions,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renameEnabled:this.props.renameEnabled,isSelected:this.props.selectedPageId===t.id,onClick:this.handleClickItem}))}.bind(this))]))),this.props.onClickAdd?e.createElement("footer",{className:"add-container",key:"add-container"},e.createElement(a.Button,{className:"add-button",onClick:this.props.onClickAdd},e.createElement(i.symbol,{name:"addPagePagesPanel"}),e.createElement("span",{},n.translate(this.props.titleAdd)))):null)}}),define("pages/panel/pagesView/pagesView",["lodash","react","pages/panel/pagesView/pagesView.rt"],function(e,t,n){"use strict";var a=function(e){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.handleClickItem=function(e){t.props.navigateTo(e)},t}return _inherits(a,t.Component),_createClass(a,[{key:"render",value:function(){return n.call(this)}}]),a}();return a.displayName="PagesView",a.propTypes={title:t.PropTypes.string.isRequired,onClose:t.PropTypes.func.isRequired,onHelp:t.PropTypes.func.isRequired,navigateTo:t.PropTypes.func.isRequired,pages:t.PropTypes.arrayOf(t.PropTypes.shape({id:t.PropTypes.string.isRequired,title:t.PropTypes.string.isRequired,info:t.PropTypes.string,actions:t.PropTypes.arrayOf(t.PropTypes.shape({title:t.PropTypes.string.isRequired,onClick:t.PropTypes.func.isRequired,symbolName:t.PropTypes.string.isRequired,isRename:t.PropTypes.bool})),typeSymbol:t.PropTypes.string,permissionSymbol:t.PropTypes.string})).isRequired,selectedPageId:t.PropTypes.string,titleAdd:t.PropTypes.string,onClickAdd:t.PropTypes.func,onShowSettings:t.PropTypes.func,renamedItemId:t.PropTypes.string,renameEnabled:t.PropTypes.bool.isRequired,biEvent:t.PropTypes.func.isRequired,biCategory:t.PropTypes.string.isRequired},a}),define("pages/panel/pagesView/editorAPIConnectors/popupView",["lodash","util","core","higherOrderComponents","stateManagement","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView"],function(e,t,n,a,i,s,o,r){"use strict";var p=function(n,a){var i=function(n,a){return e.template(t.translate(n))(a)},s=a.length,o=i("Pages_Menu_Popup_Tooltip_Start_Section",{$PAGE_NAME:e.truncate(e.head(a))}),r=i("Pages_Menu_Popup_Tooltip_End_Section",{$PAGE_NAME:e.truncate(e.last(a))}),p=void 0;if(1===s)p=o;else if(2===s)p=o+" "+r;else{p=e.reduce(e.slice(a,1,-1),function(t,n){return t+" "+i("Pages_Menu_Popup_Tooltip_Middle_Section",{$PAGE_NAME:e.truncate(n)})},o)+" "+r}return p};return a.connectEditorAPI(function(a,r){var l=r.popups,u=r.pagesData,c=r.onItemAdded,d=r.onRename,g=r.onHelp,m=r.isDesktop,f=r.biPanelName;return{pages:function(n,a,i,s,r,l){var u=o.popup(n,s,r,l),c=e.map(a,function(e){return{id:e.id,title:e.title,actions:u,typeSymbol:"popupPageType"}});return s?function(n,a,i){var s=n.pages.popupPages.getOpenBehaviorsForPopups(),o=e.zipObject(e.map(i,"id"),e.map(i,"title")),r=e.groupBy(s,"popupId"),l=n.documentServices.siteSegments.getSiteStructureId();return e.map(a,function(a){var i=r[a.id],s=!!i&&i[0].pageId===l,u=e.map(i,"pageId");if(!s){var c=e.map(u,e.partial(e.get,o));return c.length>0&&(a.info=p(n,c)),a}a.info=t.translateIfNeeded("Pages_Menu_Popup_Tooltip_Set_To_All")})}(n,c,i):c}(a,l,u,m,c,d),onClickAdd:function(e,t){return t?function(){e.getUserPreferences().session.set("addPanelCategoryIdOnClose","popup"),e.store.dispatch(i.leftBar.logic.openAddPanel()),e.bi.event(n.bi.events.pages.pagesPanel.add_page_selection_click,{category:"popup",source:"lightbox"})}:null}(a,m),navigateTo:function(e,t){return function(a){e.pages.navigateTo(a,function(){e.selection.selectComponentByCompRef(e.pages.popupPages.getPopupContainer(a))}),e.bi.event(n.bi.events.topbar.pages.top_bar_PAGES_navigate_to_pop_up,{pop_up_id:a,panel_name:t})}}(a,f),renameEnabled:m,onHelp:m?e.partial(g,s.POPUPS.helpId):e.partial(g,s.POPUPS.mobileHelpId),titleAdd:"POPUPS_SiteStructure_Panel_Button_Add",biEvent:a.bi.event,biCategory:s.POPUPS.biCategory}})(a.renderWhenMutated(r))}),define("pages/panel/pagesView/editorAPIConnectors/blogView",["lodash","higherOrderComponents","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView","core"],function(e,t,n,a,i,s){"use strict";return t.connectEditorAPI(function(t,i){var o=i.blogPages,r=i.onShowSettings,p=i.onHelp,l=i.isDesktop,u=i.biPanelName;return{pages:function(t,n,i,s){var o=a.tpaPage(t,i,s),r=a.tpaSubPage(t,i,s);return e.map(n,function(e){return{id:e.id,title:e.title,typeSymbol:"blogPageType",actions:e.isSubPage?r:o}})}(t,o,r,l),onClickAdd:null,onHelp:l?e.partial(p,n.BLOG_PAGES.helpId):e.partial(p,n.BLOG_PAGES.mobileHelpId),renameEnabled:l,navigateTo:function(e,t){return function(a){e.pages.navigateTo(a),e.bi.event(s.bi.events.pages.navigate_to_page,{page_id:a,panel_name:t,category:n.BLOG_PAGES.biCategory})}}(t,u),biEvent:t.bi.event,biCategory:n.BLOG_PAGES.biCategory}})(t.renderWhenMutated(i))}),define("pages/panel/menuView/utils/menuDataGetterUtil",["pages/utils/pageCategories"],function(e){"use strict";return{getMenuTabNameIfApplicable:function(t,n,a,i){return"CUSTOM_MAIN_MENU"===n?e.MAIN_MENU.title:a===t?e.MEMBERS_MENU.title:i},getHelpIdForMenu:function(t,n,a,i){return"CUSTOM_MAIN_MENU"===t?i?e.MAIN_MENU.helpId:e.MAIN_MENU.mobileHelpId:n===a?i?e.MEMBERS_MENU.helpId:e.MEMBERS_MENU.mobileHelpId:e.MENUS.helpId},getCategoryForBIEvent:function(t,n,a){return"CUSTOM_MAIN_MENU"===t?e.MAIN_MENU.biCategory:n===a?e.MEMBERS_MENU.biCategory:e.MENUS.biCategory}}}),define("pages/panel/getPages",["lodash","util","core","experiment","pages/panel/menuView/utils/menuDataGetterUtil"],function(e,t,n,a,i){"use strict";var s=["1380b703-ce81-ff05-f115-39571d94dfcd"],o=function(t){if(e.get(t,"pageSecurity.requireLogin"))return"membersPagePermission";return e.get(t,"pageSecurity.dialogLanguage")?"passwordPagePermission":null};return{blog:function(t){return e(t).filter(n.utils.blogTypeUtils.isBlogSpecialPage).map(function(e){return{id:e.id,title:e.title,isSubPage:!0,permissionSymbol:o(e)}}).value()},dynamicPages:function(t,n){return e.map(n,function(e){var t=e.id,n=e.label,a=e.pageData;return{id:t,title:n,permissionSymbol:o(a)}})},popups:function(e){return e.pages.popupPages.getDataListOrdered()},tpas:function(i,r){var p=n.utils.tpaTypeUtils,l=e.filter(r,function(e){return e.tpaApplicationId>0}),u=e.groupBy(l,"tpaApplicationId"),c=function(t){return e(t).filter(function(e){return p.isTPASpecialPage(i,e,!0)}).map(function(e){return{id:e.id,title:e.title,isSubPage:!0,permissionSymbol:o(e)}}).value()};return e(Object.keys(u)).map(function(n){var o=i.documentServices.tpa.app.getData(n),r=o.appDefinitionId,p=o.appDefinitionName,l=o.helpId;return e.includes(s,r)?{pagesData:c(u[n]),id:r,typeSymbol:"storesPageType",title:t.translate("NewPages_Panel_Left_StorePages_Label"),helpId:"59a4a620-30b2-4c93-a27a-c9290141738c",mobileHelpId:"2d2d9e55-a955-4f45-97c4-76fc2436f297"}:a.isOpen("pagesAllTpas")?{pagesData:c(u[n]),id:r,title:p,helpId:l}:null}).compact().value()},routers:function(t,n){return a.isOpen("dpages")?e(t.pages.dynamicPages.getMenuItems()).map(function(a){var i=a.id,s=a.label,o=a.items,r=a.prefix;if(e.isEmpty(o))return null;var p=t.documentServices.pages.getReference(o[0].id),l=t.documentServices.routers.getRouterRef.byPage(p),u=t.documentServices.routers.get.byRef(l).appDefinitionId,c=e.get(t.documentServices.platform.getAppDataByAppDefId(u),"applicationId");return n&&u===t.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId?null:{id:i,title:s,pagesData:o,prefix:r,applicationId:c}}).compact().value():[]},menus:function(t,n){var a={MEMBERS_LOGIN_MENU:!0},s=t.documentServices.menu.getAll(),o=t.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId;return e(s).map(function(e){if(a[e.id])return null;var s=t.documentServices.platform.getAppDataByApplicationId(e.appId).appDefinitionId;return{id:e.id,appDefId:s,menuItems:t.menus.getExtendedMenuItemsTree(e,n),title:i.getMenuTabNameIfApplicable(o,e.id,s,e.name)}}).compact().value()}}}),define("pages/panel/pagesView/editorAPIConnectors/dynamicPagesView",["lodash","core","higherOrderComponents","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/getPages","pages/panel/pagesView/pagesView"],function(e,t,n,a,i,s,o){"use strict";return n.connectEditorAPI(function(n,o){var r=o.router,p=r.title,l=r.pagesData,u=r.prefix,c=o.onShowSettings,d=o.isDesktop,g=o.onHelp,m=o.biPanelName,f=n.documentServices.pages.getReference(l[0].id),b=n.documentServices.routers.getRouterRef.byPage(f),P=n.documentServices.routers.get.byRef(b).appDefinitionId,y=e.get(n.documentServices.platform.getAppDataByAppDefId(P),"applicationId");return{title:p,pages:function(t,n,a,o,r,p,l){var u=s.dynamicPages(t,n,a,o,r,p);return e.map(u,function(e){var n=e.id;return{id:n,title:e.title,permissionSymbol:e.permissionSymbol,typeSymbol:"dataBinding"===l?"dynamicPageType":"routerPageType",actions:i.dynamicPage(t,n,a,o,r,p)}})}(n,l,y,b,c,d,P),onHelp:function(t,n,i){return"dataBinding"===n?t?e.partial(i,a.DYNAMIC_PAGES.helpId):e.partial(i,a.DYNAMIC_PAGES.mobileHelpId):t?e.partial(i,a.ROUTER_PAGES.helpId):e.partial(i,a.ROUTER_PAGES.mobileHelpId)}(d,P,g),renameEnabled:d,navigateTo:function(e,n){return function(i){e.pages.navigateTo(i),e.bi.event(t.bi.events.pages.navigate_to_page,{page_id:i,panel_name:n,category:a.ROUTER_PAGES.biCategory})}}(n,m),onClickAdd:function(e,n,a,s,o,r){if(!n||!e.developerMode.isEnabled())return null;var p="dataBinding"===s?"addDynamicPageClicked":"addPageToRouterClicked",l=i.getOnClickApplicationNotification(e,a,p,{prefix:o,routerRef:r});return function(n){e.bi.event(t.bi.events.pages.pagesPanel.add_page_selection_click,{category:"dynamic page",source:"router"}),l(n)}}(n,d,y,P,u,b),titleAdd:"dataBinding"===P?"NewPages_Panel_Add_Dyanamic_Page_Button":"NewPages_Panel_Routing_Add_Page_Button",biEvent:n.bi.event,biCategory:a.ROUTER_PAGES.biCategory}})(n.renderWhenMutated(o))}),define("pages/panel/pagesView/editorAPIConnectors/tpaView",["lodash","higherOrderComponents","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/pagesView/pagesView","core","pages/utils/pageCategories"],function(e,t,n,a,i,s){"use strict";return t.connectEditorAPI(function(t,a){var o=a.tpa,r=o.pagesData,p=o.title,l=o.helpId,u=o.mobileHelpId,c=o.titleAdd,d=o.onClickAdd,g=o.typeSymbol,m=a.onShowSettings,f=a.isDesktop,b=a.onHelp,P=a.biPanelName;return{title:p,pages:function(t,a,i,s,o){var r=n.tpaPage(t,i,s),p=n.tpaSubPage(t,i,s);return e.map(a,function(e){var t=e.id,n=e.title,a=e.isSubPage;return{id:t,title:n,typeSymbol:o,actions:a?p:r}})}(t,r,m,f,g),onHelp:f?e.partial(b,l):e.partial(b,u),titleAdd:c,onClickAdd:d,renameEnabled:f,navigateTo:function(e,t,n){return function(a){e.pages.navigateTo(a),e.bi.event(i.bi.events.pages.navigate_to_page,{page_id:a,panel_name:t,category:s.TPA_PAGES.biCategory+"_"+n})}}(t,P,p),biEvent:t.bi.event,biCategory:s.TPA_PAGES.biCategory+"_"+p}})(t.renderWhenMutated(a))}),define("pages/panel/menuView/utils/mainMenuTreeState",["lodash"],function(e){"use strict";function t(e,t){i[e]=Boolean(t)}function n(e,t){return i.hasOwnProperty(e)?i[e]:t||!1}function a(i){e.forEach(i,function(e){e.isCollapsed=n(e.id),e.items.length>0?a(e.items):e.isCollapsed&&(e.isCollapsed=!1,t(e.id,!1))})}var i={};return{setMenuItemCollapsed:t,reflectStateToMenuTree:a,reflectStateToMenuItem:function(a,i){return a.isCollapsed=n(a.id,i),e.get(a,"items.length",0)<=0&&a.isCollapsed&&(a.isCollapsed=!1,t(a.id,!1)),a}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewUtils",["lodash"],function(e){"use strict";return{getMenuItemsWithInitialCollaptionData:function(t,n){return n&&e.forEach(t,function(e){e.isCollapsed=n[e.id]}),t},getMenuItemsWithsymbolIfApplicable:function(t,n,a){return n===a&&e.forEach(t,function(e){e.symbol="membersAction"}),t}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewActions",["lodash","core","util","platform"],function(e,t,n,a){"use strict";function i(n,a,i,s,o){var r=s[e.findIndex(s,{id:i.id})-1],p=r.items.length;!function(t,n,a,i,s){e.forEachRight(a.items,function(e){t.menus.moveMenuItem(n,e.id,i,s)})}(n,a,i,r.id,p),n.menus.moveMenuItem(a,i.id,r.id,p),n.bi.event(t.bi.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"quick actions",source:o}),n.history.add("subpaging a page")}var s=function(e,n,a,i){e.bi.event(t.bi.events.pages.pagesPanel.quick_actions_menu_select,{page_id:n,source:i,category:a})},o=function(e,t,n,a,i){var s={};"boolean"==typeof a?s.hidePage=a:a=!n.isVisible,"boolean"==typeof i?s.mobileHidePage=i:i=!n.isVisibleMobile,n.pageData?e.pages.data.update(n.pageData.id,s):e.documentServices.menu.updateItem(t,n.id,{isVisible:!a,isVisibleMobile:!i}),e.history.add("hiding a page")},r=function(a,o,r,p,l,u){!function(e){var t=0===e.position;return!e.parent&&!t}(p)?function(t){return e.isObject(t.parent)}(p)&&r.push({title:n.translate("Pages_Actions_Page_MoveUp"),symbolName:"unsubpageAction",onClick:function(){!function(e,n,a,i){var s=a.parent.parent&&a.parent.parent.id,o=a.parent.position+1;e.menus.moveMenuItem(n,a.id,s,o),e.bi.event(t.bi.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"quick actions",source:i}),e.history.add("moving a page out of its parent")}(a,o,p,u);var n=e.get(p,"pageData.id");s(a,n,"mainpage",u)}}):r.push({title:n.translate("Pages_Actions_Page_Subpage"),symbolName:"subpageAction",onClick:function(){i(a,o,p,l,u);var t=e.get(p,"pageData.id");s(a,t,"subpage",u)}})};return{getActionsForMenuItem:function(i,p,l,u,c,d,g,m,f){return p.appId?u?function(t,n,i,o,p,l,u){var c=function(t,n,i,o,r,p){if(o){var l=t.documentServices.platform.getAppDataByApplicationId(n.appId).appDefinitionId,u=t.pages.dynamicPages.getActionByAppDefId(l,"pageSettings",[a.constants.pages.page_settings.pageInfo.type,a.constants.pages.page_settings.seo.type]);return e.map(u,function(n){return{title:n.title,symbolName:n.icon,onClick:function(){var a=e.get(i,"pageData.id");r({pageId:a,routerId:e.get(i,"link.routerId"),innerRoute:e.get(i,"link.innerRoute"),tabTitle:n.tabTitle}),s(t,a,n.tabTitle,p)},isSettings:!0}})}return[]}(t,n,i,o,p,u);return r(t,n,c,i,l,u),c}(i,p,l,u,c,m,f):null:u?function(t,a,i,p,l,u,d,g,m){var f=[];return function(t,a,i,o,r,p){i.type.isPage&&o&&a.unshift({title:n.translate("Pages_Actions_Page_Settings"),symbolName:"settingsAction",onClick:function(){r({tabTitle:"page",pageId:i.pageData.id});var n=e.get(i,"pageData.id");s(t,n,"tabPageInfo",p)},isSettings:!0},{title:n.translate("Pages_Actions_Page_SEO"),symbolName:"seoSettingsAction",onClick:function(){r({tabTitle:"seo",pageId:i.pageData.id});var n=e.get(i,"pageData.id");s(t,n,"tabSEO",p)},isSettings:!0})}(t,f,i,p,c,m),function(e,t,a,i,o){i.type.isLink&&a.push({title:n.translate("Pages_Actions_Link_Change"),symbolName:"linkAction",onClick:function(){e.menus.updateLink(t,i,i.link),s(e,null,"change link",o)}})}(t,a.id,f,i,m),function(t,a,i,o,r,p){i.push({title:n.translate("Pages_Actions_Page_Rename"),symbolName:"renameAction",onClick:function(n){o.pageData?t.menus.renamePage(o.pageData,n):function(e,t,n,a){a&&n.label!==a&&(e.menu.updateItem(t,n.id,{label:a}),e.history.debouncedAdd("Rename Menu Item"))}(t,a,o,n);var i=e.get(o,"pageData.id");s(t,i,"rename",p),r()},isRename:!0})}(t,a.id,f,i,d,m),function(t,a,i,o,r,p){t.menus.canDuplicate(o)&&i.push({title:n.translate("Pages_Actions_Page_Duplicate"),symbolName:"duplicateAction",onClick:function(){t.menus.duplicateMenuItem(a,o,r);var n=e.get(o,"pageData.id");s(t,n,"duplicate",p)}})}(t,a.id,f,i,u,m),function(t,a,i,o,r){o.type.isPage&&t.developerMode.isEnabled()&&function(e,t){var n=t.pageData&&t.pageData.id;return!!n&&e.documentServices.routers.pages.isConnectablePage(n)}(t,o)&&i.push({title:n.translate("Platform_Page_Actions_Set_Dynamic_Page"),symbolName:"page_dynamic_icon",onClick:function(){!function(e,t){var n=o.pageData.id,a=e.documentServices.platform.getAppDataByAppDefId(e.documentServices.platform.editorApps.DATA_BINDING.appDefId);e.documentServices.platform.notifyApplication(a.applicationId,{eventType:"addDynamicPageClicked",eventPayload:{pageRef:e.documentServices.pages.getReference(n),origin:"quickActionsMenu"}})}(t);var n=e.get(o,"pageData.id");s(t,n,"Set Page Dynamic",r)}})}(t,a.id,f,i,m),function(t,a,i,r,p){r.isVisible?i.push({title:n.translate("Pages_Actions_Page_Hide"),symbolName:"hideAction",onClick:function(){o(t,a,r,!0);var n=e.get(r,"pageData.id");s(t,n,"hide",p)}}):i.push({title:n.translate("Pages_Actions_Page_Unhide"),symbolName:"unhideAction",onClick:function(){o(t,a,r,!1);var n=e.get(r,"pageData.id");s(t,n,"show",p)}})}(t,a.id,f,i,m),r(t,a,f,i,g,m),function(t,a,i,o,r){i.push({title:n.translate("Pages_Actions_Page_Delete"),symbolName:"deleteAction",onClick:function(){t.menus.removeMenuItem(a,o);var n=e.get(o,"pageData.id");s(t,n,"delete",r)}})}(t,a.id,f,i,m),f}(i,p,l,u,0,d,g,m,f):function(a,i,s,r){return s.isVisibleMobile?[{title:n.translate("MenuItem_Hide_Mobile_Action"),symbolName:"quickActionsHide",onClick:function(){o(a,i,s,void 0,!0);var n=e.get(s,"pageData.id");a.bi.event(t.bi.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:n,source:r,category:"hide"})}}]:[{title:n.translate("MenuItem_Show_Mobile_Action"),symbolName:"quickActionsShow",onClick:function(){o(a,i,s,void 0,!1);var n=e.get(s,"pageData.id");a.bi.event(t.bi.events.pages.pagesPanel.quick_action_hide_show_mobile_click,{page_id:n,source:r,category:"show"})}}]}(i,p.id,l,f)}}}),define("pages/panel/menuView/editorAPIConnectors/menuViewMapper",["lodash","core","pages/panel/menuView/editorAPIConnectors/menuViewUtils","pages/panel/menuView/editorAPIConnectors/menuViewActions","pages/panel/menuView/utils/menuDataGetterUtil","pages/utils/pageCategories"],function(e,t,n,a,i,s){"use strict";var o=function(e,n,a,i,s){(e.documentServices.pages.getFocusedPageId()!==n||s)&&(e.pages.navigateToAndScroll(n,s,e.applyPreviewScrollToEditorScroll),e.bi.event(t.bi.events.pages.navigate_to_page,{page_id:n,category:a,panel_name:i}))},r=function(e){return e.getUserPreferences().session.get("collapsedMenuItems")};return function(p,l){var u=l.onShowSettings,c=l.onItemAdded,d=l.onRename,g=l.isDesktop,m=l.onHelp,f=l.menu,b=l.selectedMenuItemId,P=l.biPanelName,y=p.documentServices.menu.getById(f.id),_=p.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,h=n.getMenuItemsWithInitialCollaptionData(f.menuItems,r(p)),I=n.getMenuItemsWithsymbolIfApplicable(h,f.appDefId,_),T=i.getCategoryForBIEvent(f.id,f.appDefId,_);return{title:f.title,menuItems:I,isDraggable:g,renameEnabled:g,isMobile:!g,initialActions:!g&&f.appDefId?null:[],showAddOptions:g&&f.appDefId!==p.documentServices.platform.editorApps.SANTA_MEMBERS.appDefId,biEvent:p.bi.event,biCategory:T,onMoveMenuItem:function(e,t,n,a){return p.menus.moveMenuItem(y,e,t,n,a)},navigateCallback:function(n){if(n.type.isPage)o(p,n.pageData.id,T,P);else if(n.type.isLink&&"AnchorLink"===n.type.raw){var a=n.link,i=a.pageId&&a.pageId.replace("#","");o(p,i,T,P,a.anchorDataId)}else n.type.isLink&&"DynamicPageLink"===n.type.raw&&function(n,a,i,s,o){var r=e.assign(n.data.createItem("DynamicPageLink"),{innerRoute:i||"",routerId:a});n.pages.navigateTo(r),n.bi.event(t.bi.events.pages.navigate_to_page,{category:s,panel_name:o})}(p,n.link.routerId,n.link.innerRoute,T,P)},titleAdd:s.MENUS.titleAdd,onHelp:e.partial(m,i.getHelpIdForMenu(f.id,f.appDefId,_,g)),onClickAddPage:function(e,n,a,i,s){return function(){e.menus.addPage(a,i,s),e.bi.event(t.bi.events.pages.pagesPanel.add_page_selection_click,{category:"page",source:n})}}(p,T,f.id,b,c),onClickAddLink:function(e,n,a,i,s){return function(){e.menus.addLink(a,i,s),e.bi.event(t.bi.events.pages.pagesPanel.add_page_selection_click,{category:"link",source:n})}}(p,T,f.id,b,c),onClickAddFolder:function(e,n,a,i,s){return function(){e.menus.addFolder(a,i,s),e.bi.event(t.bi.events.pages.pagesPanel.add_page_selection_click,{category:"dropdown menu",source:n})}}(p,T,f.id,b,c),setInPrefIscollapsedMenuItems:function(e,t){return function(e,t,n){var a=r(e);return a||(e.getUserPreferences().session.set("collapsedMenuItems",{}),a={}),a[t]=Boolean(n),e.getUserPreferences().session.set("collapsedMenuItems",a)}(p,e,t)},getMenuItemsActions:function(e){return a.getActionsForMenuItem(p,y,e,g,u,c,d,h,T)}}}}),define("pages/panel/menuView/menuItem/menuItem.rt",["react","lodash","baseUI","symbols","baseUILib","util","core","experiment"],function(e,t,n,a,i,s,o,r){"use strict";return function(){function n(n){var s=this.filterRegularActions(),o=this.filterSettingsActions();return e.createElement(i.ContextMenu,{className:"flat",isOpen:this.state.contextMenuOpened,key:"page-context-menu",onToggle:this.handleContextMenuToggle,automationId:"menu-item-context-menu"},e.createElement.apply(this,[i.ContextMenuContent,{},t.map(o,function(t,n,s,o,r){return e.createElement(i.ContextMenuAction,{onClick:function(e,t,n,a,i){this.handleClickAction(a)}.bind(this,t,n,s,o,r),key:"action-"+o.title,automationId:"action-"+o.title,className:"menu-item-settings-action-pp"},e.createElement(a.symbol,{name:o.symbolName}),e.createElement("span",{},o.title))}.bind(this,n,s,o)),t.isEmpty(s)||t.isEmpty(o)?null:e.createElement(i.Divider,{key:"actions-divider"}),t.map(s,function(t,n,s,o,r){return e.createElement(i.ContextMenuAction,{onClick:function(e,t,n,a,i){this.handleClickAction(a)}.bind(this,t,n,s,o,r),key:"action-"+o.title,automationId:"action-"+o.title},e.createElement(a.symbol,{name:o.symbolName}),e.createElement("span",{},o.title))}.bind(this,n,s,o))]))}return e.createElement("div",{className:"menu-item-pp "+t(this.getTopLevelClasses()).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onClick:this.onClick,"data-aitemtype":this.getAutomationItemType()},null===this.state.inputValue?e.createElement("div",{className:"title-action-container",key:"pageInfo",onDoubleClick:this.onDoubleClick},e.createElement("div",{className:"left-container"},this.props.isDragAvailable?e.createElement(a.symbol,{name:"dragPage",key:"drag-icon",className:"page-item-drag",dataHintMyData:"hint_my_data"}):null,e.createElement(i.Tooltip,{disabled:!this.props.info,content:this.props.info,shouldTranslate:!1,arrowAlignment:"top",key:"tooltip-type-symbol-pp"},e.createElement(a.symbol,{name:this.getTypeSymbolName()})),e.createElement("span",{className:"page-title"},e.createElement(i.TooltipOnEllipsis,{marginTop:5,contentClassName:"page-title-name"},this.props.dataSource.label))),function(){var t=this.getPagePermissionSymbol();return e.createElement("div",{className:"right-container"},t?e.createElement(a.symbol,{name:t,key:"pagePermissionSymbol"}):null,this.isHidden()?e.createElement(a.symbol,{name:"hiddenPageStatus",key:"hiddenPageStatus-symbol"}):null,this.state.actions?n.apply(this,[t]):null)}.apply(this,[])):null,null!==this.state.inputValue?e.createElement("div",{className:"input-button-container",key:"input-container-page-pp"},e.createElement(i.TextInput,{value:this.state.inputValue,onChange:this.handleChangeInput,isValid:!s.validate.pageNameValidator(this.state.inputValue),invalidMessage:s.translate(s.validate.pageNameValidator(this.state.inputValue)),shouldTranslate:!1,selectOnFocus:!0,maxLength:40,onBlur:this.handleRenameDone,autoSelect:!0}),e.createElement(i.Button,{className:"done-button"},"\n            ",s.translate("Pages_Actions_Rename_Button"),"\n        ")):null)}}),define("pages/panel/menuView/menuItem/menuItem",["lodash","react","pages/panel/menuView/menuItem/menuItem.rt","experiment","core"],function(e,t,n,a,i){"use strict";var s=function(t){var n;return e.get((n={},_defineProperty(n,"1380b703-ce81-ff05-f115-39571d94dfcd","storesPageType"),_defineProperty(n,"13d21c63-b5ec-5912-8397-c3a5ddb27a97","bookingPageType"),_defineProperty(n,"14724f35-6794-cd1a-0244-25fd138f9242","forumPageType"),_defineProperty(n,"14bcded7-0066-7c35-14d7-466cb3f09103","blogPageType"),_defineProperty(n,"135aad86-9125-6074-7346-29dc6a3c9bcf","hotelsPageType"),_defineProperty(n,"13c1402c-27f2-d4ab-7463-ee7c89e07578","restaurantsPageType"),_defineProperty(n,"13e8d036-5516-6104-b456-c8466db39542","restaurantsPageType"),n),t,"tpaPageType")},o=function(t){return e.get({AnchorLink:"anchorPageType",ExternalLink:"urlPageType",EmailLink:"emailPageType",PhoneLink:"phonePageType",DocumentLink:"documentPageType"},t,"linkPageType")},r=function(r){function p(t){_classCallCheck(this,p);var n=_possibleConstructorReturn(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,t));return n.state={actions:n.props.initialActions,contextMenuOpened:!1,inputValue:function(){if(!(n.props.dataSource.id===n.props.renamedMenuItemId)||!n.props.renameEnabled)return null;var t=n.props.getMenuItemsActions(n.props.dataSource);return e.head(e.filter(t,"isRename"))?n.props.dataSource.label:null}()},n.handleClickAction=function(e){e.isRename?n.openRenameMode():e.onClick(n.props.dataSource.id,n.props.dataSource.label)},n.openRenameMode=function(){n.getRenameAction()&&n.props.renameEnabled&&n.setState({inputValue:n.props.dataSource.label})},n.handleChangeInput=function(e){return n.setState({inputValue:e})},n.handleRenameDone=function(){n.getRenameAction().onClick(n.state.inputValue),n.props.setSelected(),n.setState({inputValue:null,contextMenuOpened:!1})},n.getRenameAction=function(){var t=n.state.actions;return e.isEmpty(t)&&(t=n.props.getMenuItemsActions(n.props.dataSource)),e.head(e.filter(t,"isRename"))},n.onClick=function(e){n.props.setSelected(e)},n.onDoubleClick=function(){return n.openRenameMode()},n.handleContextMenuToggle=function(t){t?(n.setState({contextMenuOpened:!0,actions:n.getActionsForItem(n.props.dataSource)}),n.props.biEvent(i.bi.events.pages.pagesPanel.page_actions_click,{page_id:e.get(n.props.dataSource,"pageData.id"),source:n.props.biCategory})):n.setState({contextMenuOpened:!1})},n.getActionsForItem=function(e){return n.props.getMenuItemsActions(e)},n.isHidden=function(){return n.props.isMobile?!n.props.dataSource.isVisibleMobile:!n.props.dataSource.isVisible},n.getAutomationItemType=function(){var e=n.props.dataSource,t=e.parent?"subpage-":"";return e.isHomePage?t+"home":e.type.isPage?t+"page":e.type.isLink?t+"link":e.type.isDropdown?t+"folder":void 0},n.getTopLevelClasses=function(){var t={"hidden-page":n.isHidden(),selected:n.props.isSelected};return a.isOpen("pagesFirstTimeSteps")&&e.forEach(n.props.additionalClasses,function(e){t[e]=!0}),t},n.getPagePermissionSymbol=function(){if(e.get(n.props.dataSource,"pageData.pageSecurity.requireLogin"))return"membersPagePermission";return e.get(n.props.dataSource,"pageData.pageSecurity.dialogLanguage")?"passwordPagePermission":null},n.filterSettingsActions=function(){return e.filter(n.state.actions,"isSettings")},n.filterRegularActions=function(){return e.reject(n.state.actions,"isSettings")},n.getTypeSymbolName=function(){var t=n.props.dataSource;return t.symbol?t.symbol:t.type.isPopupLink?"popupPageType":t.type.isLink?o(e.get(t,"link.type")):t.type.isDropdown?"folderPageType":t.isHomePage?"homePageType":t.isOldBlog?"oldBlogPageType":"members"===e.get(t,"pageData.tpaPageId")?"membersAction":e.get(t,"pageData.tpaApplicationId")>0?s(t.appDefinitionId):"regularPageType"},n}return _inherits(p,t.Component),_createClass(p,[{key:"componentWillReceiveProps",value:function(e){var t=e.dataSource,n=e.renamedMenuItemId;t.id===n&&this.openRenameMode()}},{key:"render",value:function(){return n.call(this)}}]),p}();return r.displayName="MenuItem",r.propTypes={renamedMenuItemId:t.PropTypes.string,actions:t.PropTypes.array,dataSource:t.PropTypes.object.isRequired,additionalClasses:t.PropTypes.array,isSelected:t.PropTypes.bool,setSelected:t.PropTypes.func.isRequired,isDragAvailable:t.PropTypes.bool.isRequired,isMobile:t.PropTypes.bool.isRequired,info:t.PropTypes.string,getMenuItemsActions:t.PropTypes.func.isRequired,renameEnabled:t.PropTypes.bool,biEvent:t.PropTypes.func.isRequired,biCategory:t.PropTypes.string.isRequired,initialActions:t.PropTypes.oneOfType([t.PropTypes.array,t.PropTypes.object])},r}),define("pages/panel/menuView/addTooltips/addFolderTooltip.rt",["react","lodash","util","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement(a.Composites.RichTextLabeled,{className:"pp-add-tooltip"},e.createElement(a.TextLabel,{type:"T06",value:"NewPages_Panel_Add_Folder_Title"}),e.createElement(a.RichText,{},e.createElement("p",{},n.translate("NewPages_Panel_Add_Folder_Text"),"\n            ")))}}),define("pages/panel/menuView/addTooltips/addFolderTooltip",["lodash","react","pages/panel/menuView/addTooltips/addFolderTooltip.rt"],function(e,t,n){"use strict";var a=function(e){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return _inherits(a,t.Component),_createClass(a,[{key:"render",value:function(){return n.call(this)}}]),a}();return a.displayName="addFolderTooltip",a.propTypes={class:t.PropTypes.string},a}),define("pages/panel/menuView/addTooltips/addLinkTooltip.rt",["react","lodash","util","baseUILib"],function(e,t,n,a){"use strict";return function(){return e.createElement(a.Composites.RichTextLabeled,{className:"pp-add-tooltip"},e.createElement(a.TextLabel,{type:"T06",value:"NewPages_Panel_Add_Link_Title"}),e.createElement(a.RichText,{},e.createElement("p",{},n.translate("NewPages_Panel_Add_Link_Text"),"\n            ")))}}),define("pages/panel/menuView/addTooltips/addLinkTooltip",["lodash","react","pages/panel/menuView/addTooltips/addLinkTooltip.rt"],function(e,t,n){"use strict";var a=function(e){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return _inherits(a,t.Component),_createClass(a,[{key:"render",value:function(){return n.call(this)}}]),a}();return a.displayName="addLinkTooltip",a.propTypes={class:t.PropTypes.string},a}),define("pages/panel/menuView/menuView.rt",["react","lodash","baseUI","baseUILib","pages/panel/menuView/menuItem/menuItem","pages/panel/menuView/addTooltips/addFolderTooltip","pages/panel/menuView/addTooltips/addLinkTooltip","symbols"],function(e,t,n,a,i,s,o,r){"use strict";return function(){return e.createElement("div",{className:"menu-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp,className:"header light"},e.createElement("span",{},this.props.title)),e.createElement("div",{className:t({"pages-tree-container":!0,"disable-drag":!this.props.isDraggable}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(n.treeDocker,{className:t({"pages-tree-docker":!0,"pages-tree-shrinked":this.isShrink()}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),onNodeMoved:this.handleMovePage,treeClass:"pages-tree",treeNodeClass:"pages-tree-node",treeNodeLabelClass:"menu-item-pp",draggedClass:"rotated",previewClass:"shadow",isDragAvailable:this.props.isDraggable,scrollTopGetter:this.getScrollTop,collapsedClass:"tree-collapsed"},e.createElement(a.CustomScroll,{ref:"customScroll"},e.createElement(n.treeView,{nodeContent:i,structureType:"tree",isDragAvailable:this.props.isDraggable,isMobile:this.props.isMobile,className:"pages-tree",dataSource:this.props.menuItems,collapsedSelector:"isCollapsed",onNodeToggled:this.onMenuItemToggled,isRoot:!0,onChange:this.handleSelectedItem,initialActions:this.props.initialActions,equalityComparer:this.equalityComparer,value:this.state.selectedMenuItemId,getMenuItemsActions:this.props.getMenuItemsActions,renameEnabled:this.props.renameEnabled,biEvent:this.props.biEvent,biCategory:this.props.biCategory,renamedMenuItemId:this.props.renamedItemId})))),this.props.showAddOptions?e.createElement("footer",{key:"add-container"},e.createElement("div",{className:"add-options-container"},e.createElement(a.Button,{className:"add-menu-page-button",onClick:this.props.onClickAddPage,automationId:"add-menu-page-button"},e.createElement(r.symbol,{name:"addPagePagesPanel"}),e.createElement("span",{className:"add-title"},this.props.titleAdd)),e.createElement(a.Tooltip,{className:"add-menu-link-button",content:e.createElement(o)},e.createElement(a.Button,{onClick:this.props.onClickAddLink,automationId:"add-menu-link-button"},e.createElement(r.symbol,{name:"addLink"}))),e.createElement(a.Tooltip,{className:"add-menu-folder-button",content:e.createElement(s)},e.createElement(a.Button,{onClick:this.props.onClickAddFolder,automationId:"add-menu-folder-button"},e.createElement(r.symbol,{name:"addFolder"}))))):null)}}),define("pages/panel/menuView/menuView",["react","reactDOM","lodash","core","higherOrderComponents","pages/panel/menuView/utils/mainMenuTreeState","pages/panel/menuView/editorAPIConnectors/menuViewMapper","pages/panel/menuView/menuView.rt"],function(e,t,n,a,i,s,o,r){"use strict";var p=17,l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.reduce(t,function(t,n){return t+1+(n.isCollapsed?0:e(n.items))},0)},u=function(n){function i(e){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.state={selectedMenuItemId:n.props.selectedMenuItemId},n.scrollToSelectedNode=!1,n.componentWillReceiveProps=function(e){n.props.selectedMenuItemId!==e.selectedMenuItemId&&n.setState({selectedMenuItemId:e.selectedMenuItemId}),e.renamedItemId&&n.setState({selectedMenuItemId:e.renamedItemId})},n.componentDidUpdate=function(){n.doScrollToSelectedNode()},n.componentDidMount=function(){n.scrollToSelectedNode=!0,n.doScrollToSelectedNode()},n.isShrink=function(){return l(n.props.menuItems)>p},n.getScrollTop=function(){return n.refs.customScroll.getScrollTop()},n.handleMovePage=function(e){var t={items:n.props.menuItems},i=e.from.findIn(t,"items"),o=i.id;if(o){var r=e.to.parent().findIn(t,"items").id||null,p=e.to.findIn(t,"items"),l=p?p.position:e.to.atRight();r&&s.setMenuItemCollapsed(r,!1),n.props.onMoveMenuItem(o,r,l,function(){r&&(n.scrollToSelectedNode=!0),n.handleSelectedItem(i)}),n.props.biEvent(a.bi.events.topbar.pages.top_bar_PAGES_menu_drag,{source:n.props.biCategory}),r&&1===e.from.length()?n.props.biEvent(a.bi.events.topbar.pages.top_bar_PAGES_menu_sub_page_created,{origin:"drag",source:n.props.biCategory}):!r&&e.from.length()>1&&n.props.biEvent(a.bi.events.topbar.pages.top_bar_PAGES_menu_user_reverted_to_main_page,{origin:"drag",source:n.props.biCategory})}},n.onMenuItemToggled=function(e,t){var a=e.props.dataSource.id;n.props.setInPrefIscollapsedMenuItems(a,t)},n.handleSelectedItem=function(e){(e.type.isDropdown||e.type.isLink&&"DynamicPageLink"!==e.type.raw)&&n.props.onSelectNonPageItem(),n.setState({selectedMenuItemId:e.id}),n.props.navigateCallback(e)},n.equalityComparer=function(e,t){return e.id===t},n.doScrollToSelectedNode=function(){var e=void 0,a=void 0,i=NaN;if(n.scrollToSelectedNode){n.scrollToSelectedNode=!1;var s=t.findDOMNode(n),o=s.querySelector(".pages-tree-container"),r=s.querySelector(".menu-item-pp.selected");r&&(e=o.getBoundingClientRect(),(a=r.getBoundingClientRect()).top<e.top?i=n.getScrollTop()+(a.top-e.top):a.bottom>e.bottom&&(i=n.getScrollTop()+(a.bottom-e.bottom)),isNaN(i)||n.refs.customScroll.updateScrollPosition(Math.max(0,i)))}},n}return _inherits(i,e.Component),_createClass(i,[{key:"render",value:function(){return r.call(this)}}]),i}();u.displayName="MenuView",u.propTypes={selectedMenuItemId:e.PropTypes.string,setInPrefIscollapsedMenuItems:e.PropTypes.func.isRequired,navigateCallback:e.PropTypes.func.isRequired,isDraggable:e.PropTypes.bool.isRequired,isMobile:e.PropTypes.bool.isRequired,onMoveMenuItem:e.PropTypes.func.isRequired,menuItems:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,title:e.PropTypes.string.isRequired,onClose:e.PropTypes.func.isRequired,onHelp:e.PropTypes.func.isRequired,getMenuItemsActions:e.PropTypes.func.isRequired,renamedItemId:e.PropTypes.string,initialActions:e.PropTypes.oneOfType([e.PropTypes.array,e.PropTypes.object]),renameEnabled:e.PropTypes.bool.isRequired,showAddOptions:e.PropTypes.bool.isRequired,onClickAddPage:e.PropTypes.func.isRequired,onClickAddLink:e.PropTypes.func.isRequired,onClickAddFolder:e.PropTypes.func.isRequired,titleAdd:e.PropTypes.string.isRequired,onSelectNonPageItem:e.PropTypes.func.isRequired,biEvent:e.PropTypes.func.isRequired,biCategory:e.PropTypes.string.isRequired};var c=i.connectEditorAPI(o)(i.renderWhenMutated(u));return c.pure=u,c}),define("pages/panel/transitionsView/transitionsView.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,i){"use strict";return function(){return e.createElement("div",{className:"transitions-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:function(){this.props.onHelp("000c9232-9321-4738-94c8-885f8633b35b")}.bind(this),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement(a.Composites.Thumbnails,{},e.createElement(a.Thumbnails,{value:this.props.selectedTransition,onChange:this.props.onClickTransition,maxThumbsPerRow:3,options:this.getTransitions()})))}}),define("pages/panel/transitionsView/transitionsView",["lodash","react","symbols","pages/panel/transitionsView/transitionsView.rt"],function(e,t,n,a){"use strict";var i=function(e){return t.createElement(n.symbol,{name:e})},s=[{value:"none",label:"Pages_Menu_Transitions_None",illustration:i("transition-none")},{value:"swipeHorizontalFullScreen",label:"Pages_Menu_Transitions_SwipeH_Selected",illustration:i("transition-pages-horizontal")},{value:"swipeVerticalFullScreen",label:"Pages_Menu_Transitions_SwipeV_Popup",illustration:i("transition-pages-vertical")},{value:"crossfade",label:"Pages_Menu_Transitions_CrossFade",illustration:i("transition-pages-crossfade")},{value:"outIn",label:"Pages_Menu_Transitions_OutIn",illustration:i("transition-pages-inout")}],o=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.getTransitions=function(){return s},t}return _inherits(n,t.Component),_createClass(n,[{key:"render",value:function(){return a.call(this)}}]),n}();return o.displayName="TransitionsView",o.propTypes={onClickTransition:t.PropTypes.func.isRequired,title:t.PropTypes.string.isRequired,onClose:t.PropTypes.func.isRequired,onHelp:t.PropTypes.func.isRequired,selectedTransition:t.PropTypes.string.isRequired},o}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt",["react","lodash","util","baseUILib","pages/utils/pageCategories"],function(e,t,n,a,i){"use strict";return function(){return e.createElement("div",{className:"dynamic-pages-intro-view-pp"},e.createElement(a.PanelHeader,{onClose:this.props.onClose,onHelp:this.props.onHelp.bind(null,i.DYNAMIC_PAGES_INTRO.helpId),className:"header light"},e.createElement("span",{},this.props.title)),e.createElement("img",{className:"banner",src:n.media.getMediaUrl("panels/pages/add_dynamic_pages_intro.png")}),e.createElement(a.Composites.RichTextLabeled,{className:"composite-centered"},e.createElement(a.TextLabel,{type:"T16",value:"Platform_Pages_Menu_Add_Dynamic_Page_Member_Title"}),e.createElement(a.RichText,{type:"T06"},n.translate("Platform_Pages_Menu_Add_Dynamic_Page_Member_Text"))),e.createElement(a.Composites.ActionSetVertical,{},e.createElement(a.Button,{onClick:this.props.addDynamicPage},e.createElement("span",{},n.translate("Platform_Pages_Menu_Add_Dynamic_Page_Add_Button")))))}}),define("pages/panel/dynamicPagesIntroView/dynamicPagesIntroView",["lodash","react","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView.rt"],function(e,t,n){"use strict";var a=function(e){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return _inherits(a,t.Component),_createClass(a,[{key:"render",value:function(){return n.call(this)}}]),a}();return a.displayName="DynamicPagesIntroView",a.propTypes={title:t.PropTypes.string.isRequired,onClose:t.PropTypes.func.isRequired,onHelp:t.PropTypes.func.isRequired,addDynamicPage:t.PropTypes.func.isRequired},a}),define("pages/panel/pagesPanelMapper",["lodash","tpa","blog","core","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/getActions","pages/panel/getPages"],function(e,t,n,a,i,s,o){"use strict";var r=function(e,t){var n=e.documentServices.homePage.get(),a=u(t,n);return{selectedPageId:n,selectedMenuItemId:a.id,selectedTabId:a.menuId}},p=function(t,n,a,i,s){var o=e.find(a,function(t){var a=t.pagesData;return e.some(a,{id:n})}),r=e.get(o,"id");if(r)return{selectedPageId:n,selectedTabId:r};if(!(!!i.routerId&&!!i.innerRoute))return null;var p=l(s,i.routerId,i.innerRoute);return{selectedMenuItemId:p.id,selectedRouterId:p.routerId,selectedInnerRoute:p.innerRoute,selectedTabId:p.menuId}},l=function(t,n,a){var i=null;return e.some(t,function(t){var s=t.id,o=t.menuItems,r=e.flatMap(o,function(e){return[e].concat(_toConsumableArray(e.items))}),p=e.find(r,function(t){return e.get(t,"link.routerId")===n&&e.get(t,"link.innerRoute")===a});return i={id:e.get(p,"id"),menuId:s,routerId:n,innerRoute:a},p})?i:{}},u=function(t,n){var a=null;return e.some(t,function(t){var i=t.id,s=t.menuItems,o=e.flatMap(s,function(e){return[e].concat(_toConsumableArray(e.items))}),r=e.find(o,["pageData.id",n]);return a={id:e.get(r,"id"),menuId:i},r})?a:{}},c=function(t,n,a){if(e.some(n,{id:t}))return i.BLOG_PAGES.id;var s=e.find(a,function(n){var a=n.pagesData;return e.some(a,{id:t})});return e.get(s,"id")};return function(l,d){var g=l.documentServices.pages.getPagesData(),m=l.documentServices.pages.data.get,f=l.isDesktopEditor(),b=o.blog(g),P=function(t,n){return e.map(o.routers(t,!0),function(e){return e.actions=s.router(t,n,e.applicationId,e.prefix),e})}(l,f),y=function(t,n,a){return e.map(o.tpas(t,n),function(e){return e.actions=s.tpaTab(t,e.id,a),e})}(l,g,f),_=function(t,n,a){return e.map(o.menus(t,n),function(e){return e.actions=s.menuTab(t,e.appDefId,a),e})}(l,g,f),h=function(t,n,a,s,o){var l=t.pages.popupPages.getCurrentPopup();if(l)return{selectedPageId:l.id,selectedTabId:i.POPUPS.id};var d=t.pages.getCurrentUrlPageId();if(!d)return{};var g=t.documentServices.routers.getCurrentInnerRoute();if(g.isDynamic){var m=p(t,d,o,g,n);if(m)return m}var f=u(n,d),b=f.menuId||c(d,a,s);return b?{selectedPageId:d,selectedMenuItemId:e.get(f,"id"),selectedTabId:b}:r(t,n)}(l,_,b,y,P),I=h.selectedPageId,T=h.selectedMenuItemId,v=h.selectedRouterId,C=h.selectedInnerRoute,S=h.selectedTabId;return{selectedPageId:I,selectedMenuItemId:T,selectedRouterId:v,selectedInnerRoute:C,initialTabId:d.menuId||S,onHelp:function(e,t){return function(n){var i={panel_name:t,origin:a.constants.BI.HELP.ORIGIN.PAGES_PANEL,learn_more:!0};e.panelManager.openHelpCenter(n,null,i)}}(l,d.panelName),onClose:function(e,t){return function(){e.panelManager.closePanelByName(t)}}(l,d.panelName),blogPages:b,blogTabActions:s.blogTab(l,b,f),pagesData:g,menus:_,routers:P,tpas:y,isTPASubPage:function(e,t){return function(n){var i=t(n);return a.utils.tpaTypeUtils.isTPASpecialPage(e,i)||a.utils.blogTypeUtils.isBlogSpecialPage(i)}}(l,m),popups:o.popups(l),getPageData:m,openBlogManager:function(){return n.openBlogManagerFrame(l,"allPosts")},openStoreManager:function(){t.superApps.openDashboardUrl(t.superApps.superAppsConstants.ECOM_APP_DEF_ID,"90%","100%"),l.bi.event(a.bi.events.topbar.pages.top_bar_PAGES_store_pages_store_manager_click)},isDesktop:f,biEvent:l.bi.event,biPanelName:"pages_panel",addDynamicPage:function(e){return function(){var t=e.documentServices.platform.editorApps.DATA_BINDING.appDefId,n=e.documentServices.platform.getAppDataByAppDefId(t).applicationId;e.documentServices.platform.notifyApplication(n,{eventType:"addDynamicPageClicked",eventPayload:{origin:"pagesPanel"}}),e.bi.event(a.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click,{category:"add_dynamic_page",origin:"dynamic_page_intro"})}}(l),isDeveloperModeEnabled:Boolean(l.developerMode.isEnabled()),selectedTransition:function(t){var n=t.pages.transitions.get();return e.get({outIn:"outIn",crossfade:"crossfade",shrinkfade:"crossfade",swipeHorizontal:"swipeHorizontalFullScreen",swipeHorizontalFullScreen:"swipeHorizontalFullScreen",swipeVertical:"swipeVerticalFullScreen",swipeVerticalFullScreen:"swipeVerticalFullScreen",none:"none"},n,"none")}(l),onClickTransition:function(t){return function(n){var i=function(t){return e.trim(t.link.pageId,"#")};t.pages.transitions.set(n),t.bi.event(a.bi.events.pages.pagesPanel.page_transition_selected_click,{category:n});var s=t.documentServices.pages.getPrimaryPageId(),o=e(t.documentServices.mainMenu.getMenu(!0)).flatMap(function(e){return[e].concat(_toConsumableArray(e.items))}).filter(function(n){return"PageLink"===e.get(n,"link.type")&&!t.documentServices.pages.popupPages.isPopup(i(n))}).map(i).value(),r=o.indexOf(s),p=(r+1)%o.length;p!==r&&t.pages.navigateTo(o[p])}}(l),pageSettingsPanelTabCounter:l.getForcePageSettingsTabEventCounter()}}}),define("pages/panel/tabs/panelTabs.rt",["react","lodash","util","baseUILib","symbols"],function(e,t,n,a,i){"use strict";return function(){function n(n,s){return e.createElement("li",{onClick:function(e,t){this.handleClick(e)}.bind(this,n,s),key:"li-"+n.id,"data-aid":"tab-"+n.title,className:"tab"},e.createElement("div",{className:"container-for-background "+t({selected:this.props.selectedTabId===n.id}).transform(function(e,t,n){t&&e.push(n)},[]).join(" ")},e.createElement(a.TooltipOnEllipsis,{marginTop:9},e.createElement("div",{className:"title"},n.title)),e.createElement(a.Tooltip,{marginTop:6,className:"actions-tooltip",content:"NewPages_Panel_Left_SiteMenu_Actions_Label",closeOnMouseClick:!0},n.actions?e.createElement.apply(this,[a.ContextMenu,{customButton:this.getActionsButton(n.id),key:"tab-context-menu",onToggle:function(e,t,n){this.handleContextMenuToggle(e,n)}.bind(this,n,s)},t.map(n.actions,function(t,n,s,o){return e.createElement(a.ContextMenuAction,{onClick:s.onClick,key:"action-"+s.title},e.createElement(i.symbol,{name:s.symbolName}),e.createElement("span",{},s.title))}.bind(this,n,s))]):null)),n.separatorAfter?e.createElement(a.Divider,{key:"separator-after-"+n.id}):null)}return e.createElement("div",{className:"tabs-pp"},e.createElement.apply(this,["ul",{},t.map(this.getTabs(),n.bind(this))]))}}),define("pages/panel/tabs/panelTabs",["react","lodash","util","core","symbols","pages/utils/pageCategories","pages/panel/tabs/panelTabs.rt"],function(e,t,n,a,i,s,o){"use strict";var r=function(e){var t=e.id,a=e.title,i=e.group,s=e.biCategory;return{id:t,title:n.translate(a),group:i,biCategory:s}},p=function(e){return t(e).groupBy("group").forEach(function(e){t.last(e).separatorAfter=!0})},l=function(e){return e.id===s.MAIN_MENU.id?s.MAIN_MENU.biCategory:e.id===s.MEMBERS_MENU.id?s.MEMBERS_MENU.biCategory:e.group===s.TPA_PAGES.group?s.TPA_PAGES.biCategory+" "+e.title:e.biCategory},u=function(e,n,a){if(e&&n&&t.isEmpty(a))return[r(s.DYNAMIC_PAGES_INTRO)];var i=[];return t.forEach(a,function(e){var t=e.id,n=e.title,a=e.actions;i.push({id:t,title:n,actions:a,group:s.DYNAMIC_PAGES.group,biCategory:s.DYNAMIC_PAGES.biCategory})}),i},c=function(n){function c(n){_classCallCheck(this,c);var o=_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,n));return o.getTabs=function(){var e=u(o.props.isDeveloperModeEnabled,o.props.isDesktop,o.props.routers),n=[];if(t.forEach(o.props.menus,function(e){var t=e.id,a=e.title,i=e.actions;n.push({id:t,title:a,actions:i,group:s.MENUS.group})}),!t.isEmpty(o.props.blogPages)){var a=r(s.BLOG_PAGES);a.actions=o.props.blogTabActions,n.push(a)}return t.forEach(o.props.tpas,function(e){var t=e.id,a=e.title,i=e.actions;n.push({id:t,title:a,actions:i,group:s.TPA_PAGES.group})}),n=n.concat(e),t.isEmpty(o.props.popups)||n.push(r(s.POPUPS)),p(n),o.props.isDesktop?n.push(r(s.TRANSITIONS)):t.last(n).separatorAfter=!1,n},o.handleContextMenuToggle=function(e,t){t&&o.props.biEvent(a.bi.events.pages.pagesPanel.tab_clicked_on_settings,{category:l(e)})},o.getActionsButton=function(t){return e.createElement("div",{key:"actions-button-"+t},e.createElement(i.symbol,{name:"settingsActionSmall"}))},o.handleClick=function(e){o.props.biEvent(a.bi.events.pages.pagesPanel.category_click,{category:l(e)}),o.props.onClickTab(e.id)},o}return _inherits(c,e.Component),_createClass(c,[{key:"render",value:function(){return o.call(this)}}]),c}();return c.displayName="PanelTabs",c.propTypes={blogPages:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,popups:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,blogTabActions:e.PropTypes.arrayOf(e.PropTypes.object),routers:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,tpas:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,menus:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,onClickTab:e.PropTypes.func.isRequired,selectedTabId:e.PropTypes.string,biEvent:e.PropTypes.func.isRequired,isDeveloperModeEnabled:e.PropTypes.bool.isRequired,isDesktop:e.PropTypes.bool.isRequired},c}),define("pages/panel/pagesPanel.rt",["react","lodash","pages/panel/tabs/panelTabs","util","panels","pageSettingsPanel"],function(e,t,n,a,i,s){"use strict";return function(){return function(){var t=s.settingsPanels.wrappedMain,a=s.settingsPanels.tpaSubPage;return e.createElement(i.frames.leftPanelFrame,{className:"left-panel-frame-pages-panel-pp",ref:"pagesPanel",panelName:this.props.panelName,panelIndex:this.props.panelIndex,panelClass:"pages-panel-pp"},e.createElement(n,{onClickTab:this.handleClickTab,selectedTabId:this.state.selectedTabId,blogPages:this.props.blogPages,blogTabActions:this.props.blogTabActions,popups:this.props.popups,isDeveloperModeEnabled:this.props.isDeveloperModeEnabled,routers:this.props.routers,tpas:this.props.tpas,isDesktop:this.props.isDesktop,menus:this.props.menus,biEvent:this.props.biEvent}),"\n    ",this.getView(),"\n        ",this.showRegularSettings()?e.createElement(t,{key:"page-settings-panel-pp",menuItem:this.getSettingsItem(),menuId:this.state.settingsData.menuId,activeTab:this.state.settingsData.tabTitle,closeSettingsPanel:this.handleCloseSettings,token:"dffdfadsfa",actions:{closeSettingsPanel:this.handleCloseSettings}}):null,this.showSettingsForTPASubPage()?e.createElement(a,{key:"page-settings-panel-pp",ref:"settingsPanel",menuItem:this.getSettingsItem(),closeSettingsPanel:this.handleCloseSettings,actions:{openBlogManager:this.props.openBlogManager,openStoreManager:this.props.openStoreManager}}):null)}.apply(this,[])}}),define("pages/panel/pagesPanel",["react","lodash","higherOrderComponents","util","pages/utils/pageCategories","pages/panel/pagesView/editorAPIConnectors/popupView","pages/panel/pagesView/editorAPIConnectors/blogView","pages/panel/pagesView/editorAPIConnectors/dynamicPagesView","pages/panel/pagesView/editorAPIConnectors/tpaView","pages/panel/menuView/menuView","pages/panel/transitionsView/transitionsView","pages/panel/dynamicPagesIntroView/dynamicPagesIntroView","pages/panel/pagesPanelMapper","pages/panel/pagesPanel.rt"],function(e,t,n,a,i,s,o,r,p,l,u,c,d,g){"use strict";var m=a.translate("NewPages_Panel_AddPage_Button"),f=function(n){function d(n){_classCallCheck(this,d);var g=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,n));return g.getInitialSettingsData=function(){return n.initialSettingsTabTitle?{tabTitle:n.initialSettingsTabTitle,pageId:n.selectedPageId}:null},g.state={selectedTabId:g.props.initialTabId,settingsData:g.getInitialSettingsData(),renamedItemId:null},g.getView=function(){var n=void 0,d=g.state.selectedTabId;return d===i.TRANSITIONS.id?n=u:d===i.DYNAMIC_PAGES_INTRO.id?n=c:t.some(g.props.menus,{id:d})?n=l:d===i.POPUPS.id?n=s:d===i.BLOG_PAGES.id?n=o:t.some(g.props.tpas,{id:d})?n=p:t.some(g.props.routers,{id:d})&&(n=r),e.createElement(n,{pagesData:g.props.pagesData,onClose:g.props.onClose,onHelp:g.props.onHelp,selectedMenuItemId:g.props.selectedMenuItemId,selectedPageId:g.props.selectedPageId,renamedItemId:g.state.renamedItemId,titleAdd:m,title:a.translate(t.get(i[d],"title")),onShowSettings:g.handleShowSettings,onItemAdded:function(e){return g.setState({renamedItemId:e,settingsData:null})},onRename:function(){return g.setState({renamedItemId:null})},isDesktop:g.props.isDesktop,blogPages:g.props.blogPages,popups:g.props.popups,menu:t.find(g.props.menus,{id:d}),router:t.find(g.props.routers,{id:d}),tpa:t.find(g.props.tpas,{id:d}),selectedTransition:g.props.selectedTransition,onClickTransition:g.props.onClickTransition,onSelectNonPageItem:g.handleCloseSettings,addDynamicPage:g.props.addDynamicPage,biPanelName:g.props.biPanelName})},g.handleClickTab=function(e){return g.setState({selectedTabId:e,settingsData:null})},g.handleChangeShownSettings=function(e){e?g.setState(function(n){return{settingsData:t.assign(n.settingsData,{tabTitle:e.tabTitle,pageId:e.pageId,routerId:e.routerId,innerRoute:e.innerRoute})}}):g.handleCloseSettings()},g.handleCloseSettings=function(){return g.setState({settingsData:null})},g.handleShowSettings=function(e){g.setState(function(n){return{settingsData:t.assign({},n.settingsData,e)}})},g.getSettingsItem=function(){var e=t.get(g.state.settingsData,"pageId"),n=t.get(g.state.settingsData,"routerId"),a=t.get(g.state.settingsData,"innerRoute"),i=t.find(g.props.routers,{id:g.state.selectedTabId}),s=e&&g.props.getPageData(e);return{pageData:s,label:t.get(s,"title"),routerId:n,innerRoute:a,type:{isPage:!0,isDynamicPage:!!i,routerType:t.get(i,"routerType")}}},g.updateSelectedTabIdIfDeleted=function(e){var n=g.state.selectedTabId,a=n===i.BLOG_PAGES.id&&t.isEmpty(e.blogPages),s=t.some(g.props.tpas,{id:n})&&!t.some(e.tpas,{id:n});(a||s)&&g.setState({selectedTabId:e.initialTabId})},g.showSettingsForTPASubPage=function(){return g.state.settingsData&&t.get(g.state.settingsData,"pageId")&&g.props.isTPASubPage(g.state.settingsData.pageId)},g.showRegularSettings=function(){var e=g.state.settingsData&&t.get(g.state.settingsData,"pageId")&&!g.props.isTPASubPage(g.state.settingsData.pageId),n=g.state.settingsData&&t.get(g.state.settingsData,"routerId")&&t.get(g.state.settingsData,"innerRoute");return e||n},g}return _inherits(d,e.Component),_createClass(d,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedPageId!==e.selectedPageId,n=this.props.selectedRouterId!==e.selectedRouterId,a=this.props.selectedInnerRoute!==e.selectedInnerRoute,s=this.state.selectedTabId===i.TRANSITIONS.id;this.state.settingsData&&(t||n||a)&&this.handleChangeShownSettings({tabTitle:null,pageId:e.selectedPageId,routerId:e.selectedRouterId,innerRoute:e.selectedInnerRoute}),e.initialTabId&&!s&&(t||n||a)&&this.setState({selectedTabId:e.initialTabId}),e.pageSettingsPanelTabCounter>this.props.pageSettingsPanelTabCounter&&this.handleShowSettings({tabTitle:e.initialSettingsTabTitle,pageId:e.selectedPageId,routerId:e.selectedRouterId,innerRoute:e.selectedInnerRoute}),this.updateSelectedTabIdIfDeleted(e)}},{key:"render",value:function(){return g.call(this)}}]),d}();f.displayName="PagesPanel",f.propTypes={pagesData:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,selectedPageId:e.PropTypes.string,selectedRouterId:e.PropTypes.string,selectedInnerRoute:e.PropTypes.string,selectedMenuItemId:e.PropTypes.string,initialTabId:e.PropTypes.string,blogPages:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,blogTabActions:e.PropTypes.arrayOf(e.PropTypes.object),menus:e.PropTypes.arrayOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,title:e.PropTypes.string.isRequired,applicationId:e.PropTypes.string})).isRequired,routers:e.PropTypes.arrayOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,title:e.PropTypes.string.isRequired,pagesData:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,prefix:e.PropTypes.string.isRequired})).isRequired,tpas:e.PropTypes.arrayOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,title:e.PropTypes.string.isRequired,pagesData:e.PropTypes.arrayOf(e.PropTypes.object).isRequired})).isRequired,popups:e.PropTypes.arrayOf(e.PropTypes.object).isRequired,panelName:e.PropTypes.string,onClose:e.PropTypes.func.isRequired,onHelp:e.PropTypes.func.isRequired,getPageData:e.PropTypes.func.isRequired,isTPASubPage:e.PropTypes.func.isRequired,openStoreManager:e.PropTypes.func.isRequired,openBlogManager:e.PropTypes.func.isRequired,isDesktop:e.PropTypes.bool.isRequired,biEvent:e.PropTypes.func.isRequired,biPanelName:e.PropTypes.string.isRequired,selectedTransition:e.PropTypes.string.isRequired,onClickTransition:e.PropTypes.func.isRequired,isDeveloperModeEnabled:e.PropTypes.bool.isRequired,addDynamicPage:e.PropTypes.func.isRequired,initialSettingsTabTitle:e.PropTypes.string,pageSettingsPanelTabCounter:e.PropTypes.number},f.defaultProps={panelName:"pagesPanel"};var b=n.connectEditorAPI(d)(f);return b.pure=f,b}),define("pages/quickNavigation/quickNavigationMapper",["lodash","util","core","pages/utils/pageCategories","pages/panel/getPages"],function(e,t,n,a,i){"use strict";var s="quick_navigation",o=function(e,n){return n>0&&{title:t.translate(e.title)}},r=function t(n,a,i){if(!e.isEmpty(a.items)){var s=e(a.items).flatMap(function(e){return t(n,e,!0)}).compact().value();if(!e.isEmpty(s))return[{id:e.get(a.pageData,"id",a.id),title:e.get(a.pageData,"title",a.label),isFolder:a.type.isDropdown,isLink:a.type.isLink}].concat(_toConsumableArray(s))}return n.has(e.get(a,"pageData.id"))?null:a.type.isPage?{id:a.pageData.id,title:a.pageData.title,isNested:i}:null},p=function(t){return e.startsWith(t,"RECENTLY-")},l=function(t){return e.trimStart(t,"RECENTLY-")},u=function(e){return(p(e)?"":"RECENTLY-")+e},c=function(e,t){return t<18?[]:e.getUserPreferences().site.get("recentlyViewedPages")},d=function(t,n){if(n){var a=t.getUserPreferences().site.get("recentlyViewedPages")||[],i=e.find(a,{id:u(n.id)}),s=Date.now();i?(i.time=s,i.title=n.title):a.push({time:s,id:u(n.id),title:n.title});var o=e(a).sortBy("time").reverse().slice(0,3).value();t.getUserPreferences().site.set("recentlyViewedPages",o)}},g=function(t){return{getItems:function(t){return function(){var n=t.documentServices.pages.getPagesData(),s=i.popups(t),p=i.blog(n),l=function(t){return e.flatMap(i.routers(t),function(t){var n=t.title,a=t.pagesData;return[{title:n}].concat(_toConsumableArray(e.map(a,function(e){return{id:e.id,title:e.label}})))})}(t),u=function(t,n){return e.flatMap(i.tpas(t,n),function(e){var t=e.title,n=e.pagesData;return[{title:t}].concat(_toConsumableArray(n))})}(t,n),d=function(t){var n=new Set;return e(t).flatMap(function(t){return e.map(t,"id")}).compact().forEach(function(e){return n.add(e)}),n}([s,p,l,u]),g=i.menus(t,n),m=function(t,n){return e.flatMap(t,function(t){var a=t.title,i=t.menuItems,s=e(i).flatMap(function(e){return r(n,e)}).compact().value();if(!e.isEmpty(s))return[{title:a}].concat(_toConsumableArray(s))})}(g,d),f=d.size+m.length-g.length,b=c(t,f);return function(e,t,n){0===t+n&&(e[0]=null)}(m,d.size,b.length),e.compact([o({title:"NewPages_QuickNav_Pages_Recently_Viewed_Label"},b.length)].concat(_toConsumableArray(b),_toConsumableArray(m),_toConsumableArray(l),[o(a.BLOG_PAGES,p.length)],_toConsumableArray(p),_toConsumableArray(u),[o(a.POPUPS,s.length)],_toConsumableArray(s)))}}(t),onClickItem:function(e){return function(t){e.pages.navigateTo(l(t)),e.documentServices.pages.popupPages.isPopup(t)?e.bi.event(n.bi.events.topbar.pages.top_bar_PAGES_navigate_to_pop_up,{pop_up_id:l(t),panel_name:s}):e.bi.event(n.bi.events.pages.navigate_to_page,{page_id:l(t),panel_name:s,category:p(t)?"recently_viewed":null})}}(t),selectedItem:function(t){var n=t.pages.getCurrentUrlPageId();if(!n)return null;var a=e.get(t.pages.popupPages.getCurrentPopup(),"id",n),i={id:a,title:t.pages.getPageTitle(a)};return d(t,i),i}(t),onClickManagePages:function(e){return function(){e.panelManager.openPanel("pages.pagesPanel"),e.bi.event(n.bi.events.pages.click_on_pages_panel_open,{origin:s})}}(t),biEvent:t.bi.event,closeAllPanels:t.panelManager.closeAllPanels}};return g.PANEL_NAME=s,g}),define("pages/quickNavigation/quickNavigation.rt",["react","lodash","baseUILib","util"],function(e,t,n,a){"use strict";return function(){return e.createElement("div",{className:"quick-navigation-pp",onMouseEnter:this.handleMouseEnter,onClick:this.onClick},e.createElement(n.Tooltip,{content:this.getTooltipContent(),arrowAlignment:"top",key:"tooltip-quick-navigation-pp",closeOnMouseClick:!0,marginBottom:6},e.createElement(n.DropDown,{value:this.props.selectedItem&&this.props.selectedItem.id,onChange:this.props.onClickItem,shouldTranslate:!1,searchBox:!0,onToggle:this.handleToggle,forceOpen:this.state.forceOpen,dataLabel:a.translate("NewPages_QuickNav_Label"),optionsContainerClassName:"dropdown-quick-navigation-pp"},this.getContent(),e.createElement(n.DropDownStickyFooter,{closeOnClick:!0},e.createElement(n.Button,{className:"btn-text",onClick:this.props.onClickManagePages},e.createElement("span",{className:"manage-pages-text"},a.translate("NewPages_QuickNav_Pages_Manage_Button")))))))}}),define("pages/quickNavigation/quickNavigation",["lodash","react","higherOrderComponents","core","baseUILib","pages/quickNavigation/quickNavigationMapper","pages/quickNavigation/quickNavigation.rt"],function(e,t,n,a,i,s,o){"use strict";var r=function(n){return[t.createElement(i.SectionDivider,{className:"upper",key:e.uniqueId("section-divider")},e.upperCase(n))]},p=function(n){return t.createElement(i.DropDownOption,{value:n.id,label:n.title,shouldTranslate:!1,disabled:n.isFolder||n.isLink,optionWrapperClassName:function(e){return e.isNested?"nested-page":e.isFolder?"folder":e.isLink?"link":void 0}(n),key:e.uniqueId("quick-navigation-option")})},l=function(){return t.createElement("div",{},t.createElement(i.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_TITLE",type:"T03",className:"tooltip-title-quick-navigation-pp"}),t.createElement(i.TextLabel,{value:"TOPBAR_NEWPAGES_TOOLTIP_BODY"}))},u=function(n){function i(t){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n.state={items:t.selectedItem?n.props.getItems():[]},n.handleMouseEnter=function(){return n.setState({items:n.props.getItems()})},n.getContent=function(){return e.flatMap(n.state.items,function(e){return e.id?p(e):r(e.title)})},n.onClick=function(){n.props.biEvent(a.bi.events.topbar.top_bar_click,{category:s.PANEL_NAME}),n.props.biEvent(a.bi.events.pages.quick_navigation_clicked,{origin:"top_bar"})},n.handleToggle=function(e){e?n.props.closeAllPanels():n.setState({forceOpen:!1})},n.getTooltipContent=l,n}return _inherits(i,t.Component),_createClass(i,[{key:"componentWillReceiveProps",value:function(e){(function(e,t){var n=!e&&t,a=e&&e.id!==t.id,i=e&&e.id===t.id&&e.title!==t.title;return n||a||i})(this.props.selectedItem,e.selectedItem)&&this.setState({items:e.getItems()});e.forceOpenEventCounter>this.props.forceOpenEventCounter&&this.setState({items:e.getItems(),forceOpen:!0})}},{key:"render",value:function(){return o.call(this)}}]),i}();u.displayName="QuickNavigation",u.propTypes={onClickItem:t.PropTypes.func.isRequired,onClickManagePages:t.PropTypes.func.isRequired,getItems:t.PropTypes.func.isRequired,selectedItem:t.PropTypes.shape({id:t.PropTypes.string.isRequired,title:t.PropTypes.string.isRequired}),forceOpenEventCounter:t.PropTypes.number,biEvent:t.PropTypes.func,closeAllPanels:t.PropTypes.func};var c=n.connectEditorAPI(s)(n.renderWhenMutated(u));return c.pure=u,c}),define("pages",["pages/panel/pagesPanel","pages/quickNavigation/quickNavigation"],function(e,t){"use strict";return{pagesPanel:e,quickNavigation:t}});
//# sourceMappingURL=pages.min.js.map