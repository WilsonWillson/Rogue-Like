function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();define("higherOrderComponents/util/displayName",[],function(){"use strict";return function(e,t){return e+"("+function(e){return e.displayName||e.name||"Component"}(t)+")"}}),define("higherOrderComponents/connectEditorAPI/connectEditorAPI",["lodash","react","higherOrderComponents/util/displayName"],function(e,t,o){"use strict";return function(n){return function(r){var i=t.createClass({contextTypes:{editorAPI:t.PropTypes.object.isRequired},render:function(){var o=n(this.context.editorAPI,this.props),i=e.defaults({},o,this.props);return t.createElement(r,i)}});return i.displayName=o("ConnectEditor",r),i}}}),define("higherOrderComponents/connectEditorAPI/EditorAPIProvider",["lodash","react"],function(e,t){"use strict";var o=t.createClass({propTypes:{editorAPI:t.PropTypes.object.isRequired,children:t.PropTypes.element.isRequired},childContextTypes:{editorAPI:t.PropTypes.object.isRequired},getChildContext:function(){return{editorAPI:this.props.editorAPI}},render:function(){return t.Children.only(this.props.children)}});return o.displayName="EditorAPIProvider",o}),define("higherOrderComponents/overlappedCompTooltip/overlappedCompTooltip",["reactDOM","lodash","jquery","react","util","coreUtilsLib","core","baseUI","higherOrderComponents/util/displayName","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,n,r,i,s,p,a,c){"use strict";var l=s.constants.OVARLAPPING_COMP.DELAY,u=s.constants.OVARLAPPING_COMP.HIDE_DELAY,d=s.constants.OVARLAPPING_COMP.MIN_OVERLAP,h=function(e){return{registeredHideBubbleOnPreview:e.registeredHideBubbleOnPreview,setRegisteredHideBubbleOnPreview:function(t){e.registeredHideBubbleOnPreview=t},registerToGoToPreview:e.preview.registerToGoToPreview,getRelativeToScreenConsideringScroll:e.components.layout.getRelativeToScreenConsideringScroll,getComponentsUnderClick:e.selection.getComponentsUnderClick,previewTop:e.getPreviewPosition().top,previewMode:e.getPreviewMode(),getSitePreference:e.userPreferences.site.get,setSitePreference:e.userPreferences.site.set,getSessionPreference:e.userPreferences.session.get,setSessionPreference:e.userPreferences.session.set,reportBI:e.bi.event,toggleHalfOpacityTools:e.toolsControl.toggleHalfOpacityTools,toggleHideTools:e.toolsControl.toggleHideTools,showFloatingBubble:e.showFloatingBubble,hideFloatingBubble:e.hideFloatingBubble,toggleHideToolsBtnBlink:e.toolsControl.toggleHideToolsBtnBlink}};return function(f){return c(h)(function(c){var h=n.createClass({propTypes:{registeredHideBubbleOnPreview:n.PropTypes.bool,setRegisteredHideBubbleOnPreview:n.PropTypes.func,previewMode:n.PropTypes.bool,previewTop:n.PropTypes.number,getComponentsUnderClick:n.PropTypes.func,getSitePreference:n.PropTypes.func,setSitePreference:n.PropTypes.func,getSessionPreference:n.PropTypes.func,setSessionPreference:n.PropTypes.func,reportBI:n.PropTypes.func,toggleHalfOpacityTools:n.PropTypes.func,toggleHideTools:n.PropTypes.func,showFloatingBubble:n.PropTypes.func,hideFloatingBubble:n.PropTypes.func,registerToGoToPreview:n.PropTypes.func,getRelativeToScreenConsideringScroll:n.PropTypes.func,toggleHideToolsBtnBlink:n.PropTypes.func},getInitialState:function(){return this.intersectionComp=null,this.hideQuickTipTimer=null,{quickTipAlreadyShown:!1}},componentDidMount:function(){this.props.registeredHideBubbleOnPreview||(this.props.registerToGoToPreview(this.hideQuickTip),this.props.setRegisteredHideBubbleOnPreview(!0)),this.checkOverlap=i.timeUtils.throttle(this.checkOverlap,l,{leading:!1})},getComponentsLayoutByMouseEvent:function(e){var o=this;return t.map(this.props.getComponentsUnderClick(e),function(e){return o.props.getRelativeToScreenConsideringScroll(e).bounding})},calcOverlapPercentage:function(e,t){var o=r.math.getSquaresIntersection(t,e);return o?(this.intersectionComp=t,o.width*o.height/(t.height*t.width)*100):0},isOverlapping:function(t){var o=this.getComponentsLayoutByMouseEvent(t);if(!this.wrapped)return!1;var n=e.findDOMNode(this.wrapped),r={x:n.offsetLeft,y:n.offsetTop-this.props.previewTop,width:n.offsetWidth,height:n.offsetHeight};for(var i in o)if(o.hasOwnProperty(i)&&this.calcOverlapPercentage(r,o[i])>d)return!0;return!1},hideQuickTip:function(){window.clearTimeout(this.hideQuickTipTimer),this.props.toggleHalfOpacityTools(!1),this.props.hideFloatingBubble()},showQuickTip:function(e){var t=o(window).width()/2,r=e.pageX<t?2:-2,i=n.createElement(p.popoverTemplates.quickTip,{text:"toolbars_hide_tooltip_text",linkActionText:"toolbars_hide_tooltip_link",linkAction:this.quickTipLinkAction,linkMouseEnter:this.quickTipLinkMouseEnter,linkMouseLeave:this.quickTipLinkMouseLeave,symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),a={height:100,width:this.intersectionComp.width,top:e.clientY,left:this.intersectionComp.x+r},c={noArrow:!0,shake:!0,behindPopUps:!0,hideMethod:this.props.toggleHalfOpacityTools.bind(this,!1),alignment:p.uiConstants.TOOLTIP.ALIGNMENT.RIGHT,timeoutForMouseOverBubble:u};this.props.showFloatingBubble(i,a,c,!0),this.props.reportBI(s.bi.events.editor.hide_tools.show_controls_tooltip_appearance)},moveQuickTip:function(){var e=o(window).width()/2,t=n.createElement(p.popoverTemplates.quickTip,{text:"toolbars_show_tooltip_text",symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),r={height:this.props.previewTop+30,width:284,top:0,left:e-142};this.props.showFloatingBubble(t,r,{noArrow:!0,behindPopUps:!0,shouldHaveTransition:!0},!0),this.props.toggleHideToolsBtnBlink(!0)},quickTipCloseAction:function(){this.hideQuickTip(),this.props.reportBI(s.bi.events.editor.hide_tools.show_controls_tooltip_close);var e=this.props.getSessionPreference("hideToolsQuickTipShown")||0;this.props.setSessionPreference("hideToolsQuickTipShown",e+1)},quickTipLinkAction:function(){this.props.toggleHalfOpacityTools(!1),this.props.toggleHideTools(!0),this.props.reportBI(s.bi.events.editor.hide_tools.hide_controls,{origin:"tooltip"}),this.moveQuickTip(),this.props.setSitePreference("hideToolsQuickTipShown",!0)},quickTipLinkMouseEnter:function(){this.props.toggleHalfOpacityTools(!0)},quickTipLinkMouseLeave:function(){this.props.toggleHalfOpacityTools(!1)},resetQuickTip:function(){this.setState({quickTipAlreadyShown:!1})},checkOverlap:function(e){this.props.previewMode||this.props.getSitePreference("hideToolsQuickTipShown")||this.props.getSessionPreference("hideToolsQuickTipShown")>4||this.state.quickTipAlreadyShown||!this.isOverlapping(e)||(this.showQuickTip(e),this.setState({quickTipAlreadyShown:!0}))},wrappedMounted:function(e){this.wrapped=e},onMouseMove:function(e){e.persist(),this.checkOverlap(e)},render:function(){var e=t.assign({},this.props,{onMouseMove:this.onMouseMove,onMouseEnter:this.resetQuickTip,ref:this.wrappedMounted});return n.createElement(c,e)}});return h.displayName=a("Overlapped",c),h}(f))}}),define("higherOrderComponents/panelFrame/panelFrame",["lodash","react","prop-types","core","higherOrderComponents/util/displayName","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,n,r,i){"use strict";var s=function(e){return{registerPanelType:e.panelManager.registerPanelType,closePanelByName:e.panelManager.closePanelByName,openHelpCenter:e.panelManager.openHelpCenter}};return function(p){return i(s)(function(i){var s=t.createClass({propTypes:{selectedComponentType:o.string,onHelpClicked:o.func,panelName:o.string.isRequired,helpId:o.string,isSingleInstance:o.bool,registerPanelType:o.func.isRequired,closePanelByName:o.func.isRequired,openHelpCenter:o.func},getDefaultProps:function(){return{isSingleInstance:!1}},blockOuterScroll:function(e){var t=e.currentTarget,o=e.currentTarget.scrollHeight-e.currentTarget.offsetHeight,n=e.deltaY%3?e.deltaY:10*e.deltaY;t.scrollTop+n<=0?(t.scrollTop=0,e.preventDefault()):t.scrollTop+n>=o&&(t.scrollTop=o,e.preventDefault()),e.stopPropagation()},componentWillMount:function(){this.props.registerPanelType(this.props.panelName,i.displayName,this.props.isSingleInstance)},close:function(){this.props.closePanelByName(this.props.panelName)},openHelpCenter:function(t){if(this.props.helpId){var o={learn_more:!1,origin:n.constants.BI.HELP.ORIGIN.PANEL,panel_name:this.props.panelName,component:this.props.selectedComponentType};this.props.selectedComponentType||e.merge(o,e.pick(t,"component")),this.props.openHelpCenter(this.props.helpId,null,o)}this.props.onHelpClicked&&this.props.onHelpClicked()},render:function(){return t.createElement(i,e.assign({},this.props,{blockOuterScroll:this.blockOuterScroll,openHelpCenter:this.openHelpCenter,close:this.close}))}});return s.displayName=r("PanelFrame",i),s}(p))}}),define("higherOrderComponents/createContextProvider/createContextProvider",["react","create-react-class"],function(e,t){"use strict";return function(o){return t({childContextTypes:o.childContextTypes,getChildContext:o.getChildContext,render:function(){return e.Children.only(this.props.children)}})}}),define("higherOrderComponents/reportBiEventOnUiChange/reportBiEventOnUiChange",["react","lodash","create-react-class","prop-types","higherOrderComponents/createContextProvider/createContextProvider","core","coreUtilsLib","higherOrderComponents/util/displayName","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,n,r,i,s,p,a){"use strict";var c=function(e){return{sendSelectedComponentBI:e.selectedComponent.sendSelectedComponentBI}};return function(l){return a(c)(function(a){return o({displayName:p("reportBiEventOnUiChange",a),propTypes:{sendSelectedComponentBI:n.func.isRequired},getInitialState:function(){var e=this.onUIChange;return this.contextProvider=r({childContextTypes:{reportUIChange:n.func},getChildContext:function(){return{reportUIChange:e}}}),{}},onUIChange:function(e,o,n){var r=i.utils.uiControlsBIUtil.getEventDefinition(e);if(r){var p=i.utils.uiControlsBIUtil.getParams(e,n),c=t.assign({panel_name:a.displayName,control_name:o},p);this.props.sendSelectedComponentBI(r,c)}else s.log.warn("There is no BI event for the control [%s], in [%s] panel.\n\tDear developer, Please add the control mapping to core/bi/controlsToEvents and the event to core/bi/events.json .",e,a.displayName)},render:function(){return e.createElement(this.contextProvider,{},e.createElement(a,this.props))}})}(l))}}),define("higherOrderComponents/compPanel/compPanel",["react","lodash","create-react-class","prop-types","util","core","coreUtilsLib","higherOrderComponents/util/displayName","higherOrderComponents/connectEditorAPI/connectEditorAPI","higherOrderComponents/reportBiEventOnUiChange/reportBiEventOnUiChange"],function(e,t,o,n,r,i,s,p,a,c){"use strict";var l=function(e,o,n){var r=void 0;if(t.isUndefined(o))r=n;else if(t.isArray(o)&&t.isObject(n)){var i=t.pick(n,o);r=t.assign({},e,i)}else r=t.isObject(o)?t.assign({},e,o):t.defaults(_defineProperty({},o,n),e);return r},u=function(e,o){var n=o.selectedComponent||e.selection.getSelectedComponents();if(t.isEmpty(n))return{};var r=e.components.style.getId(n);return{selectedComponents:n,compData:e.components.data.get(n),compProperties:e.components.properties.get(n),compLayout:e.components.layout.getRelativeToStructure(n),compDesign:e.components.design.get(n),compStyleId:r,compStyle:e.theme.styles.get(r),selectedComponentType:e.selection.getSelectedComponentType(),openHelpCenter:e.panelManager.openHelpCenter,updateProperties:e.components.properties.update,updateData:e.components.data.update,updateDesign:e.components.design.update,updateLayout:e.components.layout.updateRelativeToStructure,compBehaviors:e.components.behaviors.get(e.selection.getSelectedComponents())||[],updateBehavior:e.components.behaviors.update,removeBehavior:e.components.behaviors.remove}};return function(d){return a(u)(function(a){return o({displayName:p("compPanel",a),propTypes:{compData:n.object,compDesign:n.object,compLayout:n.object.isRequired,compProperties:n.object,selectedComponentType:n.string.isRequired,openHelpCenter:n.func.isRequired,updateProperties:n.func.isRequired,updateData:n.func.isRequired,updateDesign:n.func.isRequired,updateLayout:n.func.isRequired,updateBehavior:n.func.isRequired,removeBehavior:n.func.isRequired,compBehaviors:n.arrayOf(n.object).isRequired},openHelpCenter:function(e,o){if(e){var n=!t.isNil(o),r={component:this.props.selectedComponentType,learn_more:n?!!o:null,panel_name:this.props.panelName,origin:i.constants.BI.HELP.ORIGIN.PANEL};this.props.openHelpCenter(e,null,r)}},updateProperties:function(e,t,o){var n=l(this.props.compProperties,e,t);n.id=n&&n.id?n.id:this.props.compData&&this.props.compData.id,this.props.updateProperties(this.props.selectedComponents,n,o)},updateData:function(e,t){var o=l(this.props.compData,e,t);o.id=o&&o.id?o.id:this.props.compData&&this.props.compData.id,this.props.updateData(this.props.selectedComponents,o)},updateDesign:function(e,t,o){var n=l(this.props.compData,e,t);n.id=n&&n.id?n.id:this.props.compData&&this.props.compData.id,this.props.updateDesign(this.props.selectedComponents,n,!1,o)},updateLayout:function(e,o){var n=s.objectUtils.cloneDeep(this.props.compLayout);t.isArray(e)?t.merge(n,o):n[e]=o,this.props.updateLayout(this.props.selectedComponents,n)},render:function(){var o=t.defaults({frameProps:r.panelUtils.getFrameProps(this.props),updateProperties:this.updateProperties,updateData:this.updateData,updateDesign:this.updateDesign,updateLayout:this.updateLayout},this.props);return e.createElement(a,o)}})}(c(d)))}}),define("higherOrderComponents/linkUserPreferences/linkUserPreferences",["lodash","react","prop-types","higherOrderComponents/connectEditorAPI/connectEditorAPI","higherOrderComponents/util/displayName"],function(e,t,o,n,r){"use strict";function i(e){return{userPreferences:e.userPreferences}}return function(s,p){return n(i)(function(n,i){var s=function(o){function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),o=null;return t.props.userPrefType&&t.props.dontShowAgainKey&&(o=!!t.props.userPreferences[t.props.userPrefType].get(t.props.dontShowAgainKey)),t.state={dontShowAgain:o},t}return _inherits(r,t.Component),_createClass(r,[{key:"toggleDontShowAgain",value:function(){if(this.props.userPrefType&&this.props.dontShowAgainKey){var e=!this.state.dontShowAgain;this.props.userPreferences[this.props.userPrefType].set(this.props.dontShowAgainKey,e),this.setState({dontShowAgain:e})}}},{key:"render",value:function(){var o=e.assign({},this.props,{toggleDontShowAgain:this.toggleDontShowAgain.bind(this),dontShowAgain:this.state.dontShowAgain});return t.createElement(n,o)}}]),r}();return s.displayName=r("LinkUserPreferences",n),s.propTypes={userPreferences:o.object.isRequired,userPrefType:o.oneOf(["site","session","global"]),dontShowAgainKey:o.string},s.defaultProps=i||{},s}(s,p))}}),define("higherOrderComponents/dockDataMapper/dockDataMapper",[],function(){"use strict";return function(e,t){return{dockData:e.components.layout.getDock(t.selectedComponents)||{}}}}),define("higherOrderComponents/renderWhenMutated/renderWhenMutated",["lodash","react","higherOrderComponents/util/displayName"],function(e,t,o){"use strict";return function(n){var r=t.createClass({shouldComponentUpdate:function(t){var o=e.keys(n.propTypes),r=this.props;return e.some(o,function(o){var n=r[o],i=t[o];return!(e.isFunction(n)&&e.isFunction(i)||e.isEqual(n,i))})},render:function(){return t.createElement(n,this.props)}});return r.displayName=o("RenderWhenMutated",n),r}}),define("higherOrderComponents/noUpdateOnMouseMove/noUpdateOnMouseMove",["lodash","react","create-react-class","higherOrderComponents/connectEditorAPI/connectEditorAPI","higherOrderComponents/util/displayName"],function(e,t,o,n,r){"use strict";var i=function(e){return{isPerformingMouseMoveAction:e.mouseActions.isPerformingMouseMoveAction()}};return function(e){var s=o({displayName:r("NoUpdateOnMouseMove",e),shouldComponentUpdate:function(){return!this.props.isPerformingMouseMoveAction},render:function(){return t.createElement(e,this.props)}});return n(i)(s)}}),define("higherOrderComponents",["higherOrderComponents/connectEditorAPI/connectEditorAPI","higherOrderComponents/connectEditorAPI/EditorAPIProvider","higherOrderComponents/overlappedCompTooltip/overlappedCompTooltip","higherOrderComponents/panelFrame/panelFrame","higherOrderComponents/compPanel/compPanel","higherOrderComponents/linkUserPreferences/linkUserPreferences","higherOrderComponents/dockDataMapper/dockDataMapper","higherOrderComponents/renderWhenMutated/renderWhenMutated","higherOrderComponents/noUpdateOnMouseMove/noUpdateOnMouseMove"],function(e,t,o,n,r,i,s,p,a){"use strict";return{connectEditorAPI:e,EditorAPIProvider:t,overlappedCompTooltip:o,panelFrame:n,compPanel:r,linkUserPreferences:i,dockDataMapper:s,renderWhenMutated:p,noUpdateOnMouseMove:a}});
//# sourceMappingURL=higherOrderComponents.min.js.map